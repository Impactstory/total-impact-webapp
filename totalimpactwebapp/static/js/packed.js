!function(a){a(function(){a.support.transition=(function(){var b=(function(){var e=document.createElement("bootstrap"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in d){if(e.style[c]!==undefined){return d[c]}}}());return b&&{end:b}})()})}(window.jQuery);!function(b){var a=function(d,c){this.options=c;this.$element=b(d).delegate('[data-dismiss="modal"]',"click.dismiss.modal",b.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};a.prototype={constructor:a,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var c=this,d=b.Event("show");this.$element.trigger(d);if(this.isShown||d.isDefaultPrevented()){return}b("body").addClass("modal-open");this.isShown=true;this.escape();this.backdrop(function(){var e=b.support.transition&&c.$element.hasClass("fade");if(!c.$element.parent().length){c.$element.appendTo(document.body)}c.$element.show();if(e){c.$element[0].offsetWidth}c.$element.addClass("in").attr("aria-hidden",false).focus();c.enforceFocus();e?c.$element.one(b.support.transition.end,function(){c.$element.trigger("shown")}):c.$element.trigger("shown")})},hide:function(d){d&&d.preventDefault();var c=this;d=b.Event("hide");this.$element.trigger(d);if(!this.isShown||d.isDefaultPrevented()){return}this.isShown=false;b("body").removeClass("modal-open");this.escape();b(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);b.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var c=this;b(document).on("focusin.modal",function(d){if(c.$element[0]!==d.target&&!c.$element.has(d.target).length){c.$element.focus()}})},escape:function(){var c=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.modal",function(d){d.which==27&&c.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var c=this,d=setTimeout(function(){c.$element.off(b.support.transition.end);c.hideModal()},500);this.$element.one(b.support.transition.end,function(){clearTimeout(d);c.hideModal()})},hideModal:function(c){this.$element.hide().trigger("hidden");this.backdrop()},removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(f){var e=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var c=b.support.transition&&d;this.$backdrop=b('<div class="modal-backdrop '+d+'" />').appendTo(document.body);if(this.options.backdrop!="static"){this.$backdrop.click(b.proxy(this.hide,this))}if(c){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");c?this.$backdrop.one(b.support.transition.end,f):f()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b.support.transition.end,b.proxy(this.removeBackdrop,this)):this.removeBackdrop()}else{if(f){f()}}}}};b.fn.modal=function(c){return this.each(function(){var f=b(this),e=f.data("modal"),d=b.extend({},b.fn.modal.defaults,f.data(),typeof c=="object"&&c);if(!e){f.data("modal",(e=new a(this,d)))}if(typeof c=="string"){e[c]()}else{if(d.show){e.show()}}})};b.fn.modal.defaults={backdrop:true,keyboard:true,show:true};b.fn.modal.Constructor=a;b(function(){b("body").on("click.modal.data-api",'[data-toggle="modal"]',function(h){var g=b(this),d=g.attr("href"),c=b(g.attr("data-target")||(d&&d.replace(/.*(?=#[^\s]+$)/,""))),f=c.data("modal")?"toggle":b.extend({remote:!/#/.test(d)&&d},c.data(),g.data());h.preventDefault();c.modal(f).one("hide",function(){g.focus()})})})}(window.jQuery);!function(e){var b="[data-toggle=dropdown]",a=function(g){var f=e(g).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){f.parent().removeClass("open")})};a.prototype={constructor:a,toggle:function(j){var h=e(this),g,f;if(h.is(".disabled, :disabled")){return}g=d(h);f=g.hasClass("open");c();if(!f){g.toggleClass("open");h.focus()}return false},keydown:function(l){var k,m,f,j,h,g;if(!/(38|40|27)/.test(l.keyCode)){return}k=e(this);l.preventDefault();l.stopPropagation();if(k.is(".disabled, :disabled")){return}j=d(k);h=j.hasClass("open");if(!h||(h&&l.keyCode==27)){return k.click()}m=e("[role=menu] li:not(.divider) a",j);if(!m.length){return}g=m.index(m.filter(":focus"));if(l.keyCode==38&&g>0){g--}if(l.keyCode==40&&g<m.length-1){g++}if(!~g){g=0}m.eq(g).focus()}};function c(){d(e(b)).removeClass("open")}function d(h){var f=h.attr("data-target"),g;if(!f){f=h.attr("href");f=f&&/#/.test(f)&&f.replace(/.*(?=#[^\s]*$)/,"")}g=e(f);g.length||(g=h.parent());return g}e.fn.dropdown=function(f){return this.each(function(){var h=e(this),g=h.data("dropdown");if(!g){h.data("dropdown",(g=new a(this)))}if(typeof f=="string"){g[f].call(h)}})};e.fn.dropdown.Constructor=a;e(function(){e("html").on("click.dropdown.data-api touchstart.dropdown.data-api",c);e("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(f){f.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",b,a.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",b+", [role=menu]",a.prototype.keydown)})}(window.jQuery);!function(b){function a(f,e){var g=b.proxy(this.process,this),c=b(f).is("body")?b(window):b(f),d;this.options=b.extend({},b.fn.scrollspy.defaults,e);this.$scrollElement=c.on("scroll.scroll-spy.data-api",g);this.selector=(this.options.target||((d=b(f).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""))||"")+" .nav li > a";this.$body=b("body");this.refresh();this.process()}a.prototype={constructor:a,refresh:function(){var c=this,d;this.offsets=b([]);this.targets=b([]);d=this.$body.find(this.selector).map(function(){var f=b(this),e=f.data("target")||f.attr("href"),g=/^#\w/.test(e)&&b(e);return(g&&g.length&&[[g.position().top,e]])||null}).sort(function(f,e){return f[0]-e[0]}).each(function(){c.offsets.push(this[0]);c.targets.push(this[1])})},process:function(){var h=this.$scrollElement.scrollTop()+this.options.offset,e=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,g=e-this.$scrollElement.height(),f=this.offsets,c=this.targets,j=this.activeTarget,d;if(h>=g){return j!=(d=c.last()[0])&&this.activate(d)}for(d=f.length;d--;){j!=c[d]&&h>=f[d]&&(!f[d+1]||h<=f[d+1])&&this.activate(c[d])}},activate:function(e){var d,c;this.activeTarget=e;b(this.selector).parent(".active").removeClass("active");c=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]';d=b(c).parent("li").addClass("active");if(d.parent(".dropdown-menu").length){d=d.closest("li.dropdown").addClass("active")}d.trigger("activate")}};b.fn.scrollspy=function(c){return this.each(function(){var f=b(this),e=f.data("scrollspy"),d=typeof c=="object"&&c;if(!e){f.data("scrollspy",(e=new a(this,d)))}if(typeof c=="string"){e[c]()}})};b.fn.scrollspy.Constructor=a;b.fn.scrollspy.defaults={offset:10};b(window).on("load",function(){b('[data-spy="scroll"]').each(function(){var c=b(this);c.scrollspy(c.data())})})}(window.jQuery);!function(b){var a=function(c){this.element=b(c)};a.prototype={constructor:a,show:function(){var j=this.element,f=j.closest("ul:not(.dropdown-menu)"),d=j.attr("data-target"),g,c,h;if(!d){d=j.attr("href");d=d&&d.replace(/.*(?=#[^\s]*$)/,"")}if(j.parent("li").hasClass("active")){return}g=f.find(".active a").last()[0];h=b.Event("show",{relatedTarget:g});j.trigger(h);if(h.isDefaultPrevented()){return}c=b(d);this.activate(j.parent("li"),f);this.activate(c,c.parent(),function(){j.trigger({type:"shown",relatedTarget:g})})},activate:function(e,d,h){var c=d.find("> .active"),g=h&&b.support.transition&&c.hasClass("fade");function f(){c.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");e.addClass("active");if(g){e[0].offsetWidth;e.addClass("in")}else{e.removeClass("fade")}if(e.parent(".dropdown-menu")){e.closest("li.dropdown").addClass("active")}h&&h()}g?c.one(b.support.transition.end,f):f();c.removeClass("in")}};b.fn.tab=function(c){return this.each(function(){var e=b(this),d=e.data("tab");if(!d){e.data("tab",(d=new a(this)))}if(typeof c=="string"){d[c]()}})};b.fn.tab.Constructor=a;b(function(){b("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault();b(this).tab("show")})})}(window.jQuery);!function(b){var a=function(d,c){this.init("tooltip",d,c)};a.prototype={constructor:a,init:function(f,e,d){var g,c;this.type=f;this.$element=b(e);this.options=this.getOptions(d);this.enabled=true;if(this.options.trigger=="click"){this.$element.on("click."+this.type,this.options.selector,b.proxy(this.toggle,this))}else{if(this.options.trigger!="manual"){g=this.options.trigger=="hover"?"mouseenter":"focus";c=this.options.trigger=="hover"?"mouseleave":"blur";this.$element.on(g+"."+this.type,this.options.selector,b.proxy(this.enter,this));this.$element.on(c+"."+this.type,this.options.selector,b.proxy(this.leave,this))}}this.options.selector?(this._options=b.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()},getOptions:function(c){c=b.extend({},b.fn[this.type].defaults,c,this.$element.data());if(c.delay&&typeof c.delay=="number"){c.delay={show:c.delay,hide:c.delay}}return c},enter:function(d){var c=b(d.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show){return c.show()}clearTimeout(this.timeout);c.hoverState="in";this.timeout=setTimeout(function(){if(c.hoverState=="in"){c.show()}},c.options.delay.show)},leave:function(d){var c=b(d.currentTarget)[this.type](this._options).data(this.type);if(this.timeout){clearTimeout(this.timeout)}if(!c.options.delay||!c.options.delay.hide){return c.hide()}c.hoverState="out";this.timeout=setTimeout(function(){if(c.hoverState=="out"){c.hide()}},c.options.delay.hide)},show:function(){var g,c,j,e,h,d,f;if(this.hasContent()&&this.enabled){g=this.tip();this.setContent();if(this.options.animation){g.addClass("fade")}d=typeof this.options.placement=="function"?this.options.placement.call(this,g[0],this.$element[0]):this.options.placement;c=/in/.test(d);g.remove().css({top:0,left:0,display:"block"}).appendTo(c?this.$element:document.body);j=this.getPosition(c);e=g[0].offsetWidth;h=g[0].offsetHeight;switch(c?d.split(" ")[1]:d){case"bottom":f={top:j.top+j.height,left:j.left+j.width/2-e/2};break;case"top":f={top:j.top-h,left:j.left+j.width/2-e/2};break;case"left":f={top:j.top+j.height/2-h/2,left:j.left-e};break;case"right":f={top:j.top+j.height/2-h/2,left:j.left+j.width};break}g.css(f).addClass(d).addClass("in")}},setContent:function(){var d=this.tip(),c=this.getTitle();d.find(".tooltip-inner")[this.options.html?"html":"text"](c);d.removeClass("fade in top bottom left right")},hide:function(){var c=this,d=this.tip();d.removeClass("in");function e(){var f=setTimeout(function(){d.off(b.support.transition.end).remove()},500);d.one(b.support.transition.end,function(){clearTimeout(f);d.remove()})}b.support.transition&&this.$tip.hasClass("fade")?e():d.remove();return this},fixTitle:function(){var c=this.$element;if(c.attr("title")||typeof(c.attr("data-original-title"))!="string"){c.attr("data-original-title",c.attr("title")||"").removeAttr("title")}},hasContent:function(){return this.getTitle()},getPosition:function(c){return b.extend({},(c?{top:0,left:0}:this.$element.offset()),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,c=this.$element,d=this.options;e=c.attr("data-original-title")||(typeof d.title=="function"?d.title.call(c[0]):d.title);return e},tip:function(){return this.$tip=this.$tip||b(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};b.fn.tooltip=function(c){return this.each(function(){var f=b(this),e=f.data("tooltip"),d=typeof c=="object"&&c;if(!e){f.data("tooltip",(e=new a(this,d)))}if(typeof c=="string"){e[c]()}})};b.fn.tooltip.Constructor=a;b.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:true}}(window.jQuery);!function(b){var a=function(d,c){this.init("popover",d,c)};a.prototype=b.extend({},b.fn.tooltip.Constructor.prototype,{constructor:a,setContent:function(){var e=this.tip(),d=this.getTitle(),c=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](d);e.find(".popover-content > *")[this.options.html?"html":"text"](c);e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var d,c=this.$element,e=this.options;d=c.attr("data-content")||(typeof e.content=="function"?e.content.call(c[0]):e.content);return d},tip:function(){if(!this.$tip){this.$tip=b(this.options.template)}return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});b.fn.popover=function(c){return this.each(function(){var f=b(this),e=f.data("popover"),d=typeof c=="object"&&c;if(!e){f.data("popover",(e=new a(this,d)))}if(typeof c=="string"){e[c]()}})};b.fn.popover.Constructor=a;b.fn.popover.defaults=b.extend({},b.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery);!function(b){var a=function(d,c){this.options=b.extend({},b.fn.affix.defaults,c);this.$window=b(window).on("scroll.affix.data-api",b.proxy(this.checkPosition,this));this.$element=b(d);this.checkPosition()};a.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return}var g=b(document).height(),j=this.$window.scrollTop(),c=this.$element.offset(),k=this.options.offset,e=k.bottom,f=k.top,h="affix affix-top affix-bottom",d;if(typeof k!="object"){e=f=k}if(typeof f=="function"){f=k.top()}if(typeof e=="function"){e=k.bottom()}d=this.unpin!=null&&(j+this.unpin<=c.top)?false:e!=null&&(c.top+this.$element.height()>=g-e)?"bottom":f!=null&&j<=f?"top":false;if(this.affixed===d){return}this.affixed=d;this.unpin=d=="bottom"?c.top-j:null;this.$element.removeClass(h).addClass("affix"+(d?"-"+d:""))};b.fn.affix=function(c){return this.each(function(){var f=b(this),e=f.data("affix"),d=typeof c=="object"&&c;if(!e){f.data("affix",(e=new a(this,d)))}if(typeof c=="string"){e[c]()}})};b.fn.affix.Constructor=a;b.fn.affix.defaults={offset:0};b(window).on("load",function(){b('[data-spy="affix"]').each(function(){var d=b(this),c=d.data();c.offset=c.offset||{};c.offsetBottom&&(c.offset.bottom=c.offsetBottom);c.offsetTop&&(c.offset.top=c.offsetTop);d.affix(c)})})}(window.jQuery);!function(c){var b='[data-dismiss="alert"]',a=function(d){c(d).on("click",b,this.close)};a.prototype.close=function(j){var h=c(this),f=h.attr("data-target"),g;if(!f){f=h.attr("href");f=f&&f.replace(/.*(?=#[^\s]*$)/,"")}g=c(f);j&&j.preventDefault();g.length||(g=h.hasClass("alert")?h:h.parent());g.trigger(j=c.Event("close"));if(j.isDefaultPrevented()){return}g.removeClass("in");function d(){g.trigger("closed").remove()}c.support.transition&&g.hasClass("fade")?g.on(c.support.transition.end,d):d()};c.fn.alert=function(d){return this.each(function(){var f=c(this),e=f.data("alert");if(!e){f.data("alert",(e=new a(this)))}if(typeof d=="string"){e[d].call(f)}})};c.fn.alert.Constructor=a;c(function(){c("body").on("click.alert.data-api",b,a.prototype.close)})}(window.jQuery);!function(b){var a=function(d,c){this.$element=b(d);this.options=b.extend({},b.fn.button.defaults,c)};a.prototype.setState=function(f){var h="disabled",c=this.$element,e=c.data(),g=c.is("input")?"val":"html";f=f+"Text";e.resetText||c.data("resetText",c[g]());c[g](e[f]||this.options[f]);setTimeout(function(){f=="loadingText"?c.addClass(h).attr(h,h):c.removeClass(h).removeAttr(h)},0)};a.prototype.toggle=function(){var c=this.$element.closest('[data-toggle="buttons-radio"]');c&&c.find(".active").removeClass("active");this.$element.toggleClass("active")};b.fn.button=function(c){return this.each(function(){var f=b(this),e=f.data("button"),d=typeof c=="object"&&c;if(!e){f.data("button",(e=new a(this,d)))}if(c=="toggle"){e.toggle()}else{if(c){e.setState(c)}}})};b.fn.button.defaults={loadingText:"loading..."};b.fn.button.Constructor=a;b(function(){b("body").on("click.button.data-api","[data-toggle^=button]",function(d){var c=b(d.target);if(!c.hasClass("btn")){c=c.closest(".btn")}c.button("toggle")})})}(window.jQuery);!function(a){var b=function(d,c){this.$element=a(d);this.options=a.extend({},a.fn.collapse.defaults,c);if(this.options.parent){this.$parent=a(this.options.parent)}this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var c=this.$element.hasClass("width");return c?"width":"height"},show:function(){var f,c,e,d;if(this.transitioning){return}f=this.dimension();c=a.camelCase(["scroll",f].join("-"));e=this.$parent&&this.$parent.find("> .accordion-group > .in");if(e&&e.length){d=e.data("collapse");if(d&&d.transitioning){return}e.collapse("hide");d||e.data("collapse",null)}this.$element[f](0);this.transition("addClass",a.Event("show"),"shown");a.support.transition&&this.$element[f](this.$element[0][c])},hide:function(){var c;if(this.transitioning){return}c=this.dimension();this.reset(this.$element[c]());this.transition("removeClass",a.Event("hide"),"hidden");this.$element[c](0)},reset:function(c){var d=this.dimension();this.$element.removeClass("collapse")[d](c||"auto")[0].offsetWidth;this.$element[c!==null?"addClass":"removeClass"]("collapse");return this},transition:function(g,d,e){var f=this,c=function(){if(d.type=="show"){f.reset()}f.transitioning=0;f.$element.trigger(e)};this.$element.trigger(d);if(d.isDefaultPrevented()){return}this.transitioning=1;this.$element[g]("in");a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,c):c()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};a.fn.collapse=function(c){return this.each(function(){var f=a(this),e=f.data("collapse"),d=typeof c=="object"&&c;if(!e){f.data("collapse",(e=new b(this,d)))}if(typeof c=="string"){e[c]()}})};a.fn.collapse.defaults={toggle:true};a.fn.collapse.Constructor=b;a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(h){var g=a(this),c,f=g.attr("data-target")||h.preventDefault()||(c=g.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),d=a(f).data("collapse")?"toggle":g.data();g[a(f).hasClass("in")?"addClass":"removeClass"]("collapsed");a(f).collapse(d)})})}(window.jQuery);!function(a){var b=function(d,c){this.$element=a(d);this.options=c;this.options.slide&&this.slide(this.options.slide);this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(c){if(!c){this.paused=false}this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval));return this},to:function(g){var c=this.$element.find(".item.active"),d=c.parent().children(),e=d.index(c),f=this;if(g>(d.length-1)||g<0){return}if(this.sliding){return this.$element.one("slid",function(){f.to(g)})}if(e==g){return this.pause().cycle()}return this.slide(g>e?"next":"prev",a(d[g]))},pause:function(c){if(!c){this.paused=true}if(this.$element.find(".next, .prev").length&&a.support.transition.end){this.$element.trigger(a.support.transition.end);this.cycle()}clearInterval(this.interval);this.interval=null;return this},next:function(){if(this.sliding){return}return this.slide("next")},prev:function(){if(this.sliding){return}return this.slide("prev")},slide:function(k,d){var m=this.$element.find(".item.active"),c=d||m[k](),j=this.interval,l=k=="next"?"left":"right",f=k=="next"?"first":"last",g=this,h=a.Event("slide",{relatedTarget:c[0]});this.sliding=true;j&&this.pause();c=c.length?c:this.$element.find(".item")[f]();if(c.hasClass("active")){return}if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(h);if(h.isDefaultPrevented()){return}c.addClass(k);c[0].offsetWidth;m.addClass(l);c.addClass(l);this.$element.one(a.support.transition.end,function(){c.removeClass([k,l].join(" ")).addClass("active");m.removeClass(["active",l].join(" "));g.sliding=false;setTimeout(function(){g.$element.trigger("slid")},0)})}else{this.$element.trigger(h);if(h.isDefaultPrevented()){return}m.removeClass("active");c.addClass("active");this.sliding=false;this.$element.trigger("slid")}j&&this.cycle();return this}};a.fn.carousel=function(c){return this.each(function(){var g=a(this),f=g.data("carousel"),d=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c),e=typeof c=="string"?c:d.slide;if(!f){g.data("carousel",(f=new b(this,d)))}if(typeof c=="number"){f.to(c)}else{if(e){f[e]()}else{if(d.interval){f.cycle()}}}})};a.fn.carousel.defaults={interval:5000,pause:"hover"};a.fn.carousel.Constructor=b;a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(h){var g=a(this),d,c=a(g.attr("data-target")||(d=g.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=!c.data("modal")&&a.extend({},c.data(),g.data());c.carousel(f);h.preventDefault()})})}(window.jQuery);!function(a){var b=function(d,c){this.$element=a(d);this.options=a.extend({},a.fn.typeahead.defaults,c);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.$menu=a(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=false;this.listen()};b.prototype={constructor:b,select:function(){var c=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(c)).change();return this.hide()},updater:function(c){return c},show:function(){var c=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:c.top+c.height,left:c.left});this.$menu.show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(d){var c;this.query=this.$element.val();if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source;return c?this.process(c):this},process:function(c){var d=this;c=a.grep(c,function(e){return d.matcher(e)});c=this.sorter(c);if(!c.length){return this.shown?this.hide():this}return this.render(c.slice(0,this.options.items)).show()},matcher:function(c){return ~c.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var f=[],d=[],c=[],g;while(g=e.shift()){if(!g.toLowerCase().indexOf(this.query.toLowerCase())){f.push(g)}else{if(~g.indexOf(this.query)){d.push(g)}else{c.push(g)}}}return f.concat(d,c)},highlighter:function(c){var d=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return c.replace(new RegExp("("+d+")","ig"),function(e,f){return"<strong>"+f+"</strong>"})},render:function(c){var d=this;c=a(c).map(function(e,f){e=a(d.options.item).attr("data-value",f);e.find("a").html(d.highlighter(f));return e[0]});c.first().addClass("active");this.$menu.html(c);return this},next:function(d){var e=this.$menu.find(".active").removeClass("active"),c=e.next();if(!c.length){c=a(this.$menu.find("li")[0])}c.addClass("active")},prev:function(d){var e=this.$menu.find(".active").removeClass("active"),c=e.prev();if(!c.length){c=this.$menu.find("li").last()}c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this));if(a.browser.chrome||a.browser.webkit||a.browser.msie){this.$element.on("keydown",a.proxy(this.keydown,this))}this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},move:function(c){if(!this.shown){return}switch(c.keyCode){case 9:case 13:case 27:c.preventDefault();break;case 38:c.preventDefault();this.prev();break;case 40:c.preventDefault();this.next();break}c.stopPropagation()},keydown:function(c){this.suppressKeyPressRepeat=!~a.inArray(c.keyCode,[40,38,9,13,27]);this.move(c)},keypress:function(c){if(this.suppressKeyPressRepeat){return}this.move(c)},keyup:function(c){switch(c.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}c.stopPropagation();c.preventDefault()},blur:function(d){var c=this;setTimeout(function(){c.hide()},150)},click:function(c){c.stopPropagation();c.preventDefault();this.select()},mouseenter:function(c){this.$menu.find(".active").removeClass("active");a(c.currentTarget).addClass("active")}};a.fn.typeahead=function(c){return this.each(function(){var f=a(this),e=f.data("typeahead"),d=typeof c=="object"&&c;if(!e){f.data("typeahead",(e=new b(this,d)))}if(typeof c=="string"){e[c]()}})};a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};a.fn.typeahead.Constructor=b;a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(d){var c=a(this);if(c.data("typeahead")){return}d.preventDefault();c.typeahead(c.data())})})}(window.jQuery);!function(b){var a=function(d,c){this.cinit("clickover",d,c)};a.prototype=b.extend({},b.fn.popover.Constructor.prototype,{constructor:a,cinit:function(e,d,c){this.attr={};this.attr.me=((Math.random()*10)+"").replace(/\D/g,"");this.attr.click_event_ns="click."+this.attr.me+" touchstart."+this.attr.me;if(!c){c={}}c.trigger="manual";this.init(e,d,c);this.$element.on("click",this.options.selector,b.proxy(this.clickery,this))},clickery:function(d){if(d){d.preventDefault();d.stopPropagation()}this.options.width&&this.tip().find(".popover-inner").width(this.options.width);this.options.height&&this.tip().find(".popover-inner").height(this.options.height);this.options.tip_id&&this.tip().attr("id",this.options.tip_id);this.options.class_name&&this.tip().addClass(this.options.class_name);this.toggle();if(this.isShown()){var c=this;this.options.global_close&&b("body").on(this.attr.click_event_ns,function(f){if(!c.tip().has(f.target).length){c.clickery()}});this.options.esc_close&&b(document).bind("keyup.clickery",function(f){if(f.keyCode==27){c.clickery()}return});!this.options.allow_multiple&&b("[data-clickover-open=1]").each(function(){b(this).data("clickover")&&b(this).data("clickover").clickery()});this.$element.attr("data-clickover-open",1);this.tip().on("click",'[data-dismiss="clickover"]',b.proxy(this.clickery,this));if(this.options.auto_close&&this.options.auto_close>0){this.attr.tid=setTimeout(b.proxy(this.clickery,this),this.options.auto_close)}typeof this.options.onShown=="function"&&this.options.onShown.call(this);this.$element.trigger("shown")}else{this.$element.removeAttr("data-clickover-open");this.options.esc_close&&b(document).unbind("keyup.clickery");b("body").off(this.attr.click_event_ns);if(typeof this.attr.tid=="number"){clearTimeout(this.attr.tid);delete this.attr.tid}typeof this.options.onHidden=="function"&&this.options.onHidden.call(this);this.$element.trigger("hidden")}},isShown:function(){return this.tip().hasClass("in")},resetPosition:function(){var g,c,j,e,h,d,f;if(this.hasContent()&&this.enabled){g=this.tip();d=typeof this.options.placement=="function"?this.options.placement.call(this,g[0],this.$element[0]):this.options.placement;c=/in/.test(d);j=this.getPosition(c);e=g[0].offsetWidth;h=g[0].offsetHeight;switch(c?d.split(" ")[1]:d){case"bottom":f={top:j.top+j.height,left:j.left+j.width/2-e/2};break;case"top":f={top:j.top-h,left:j.left+j.width/2-e/2};break;case"left":f={top:j.top+j.height/2-h/2,left:j.left-e};break;case"right":f={top:j.top+j.height/2-h/2,left:j.left+j.width};break}g.css(f)}},debughide:function(){var c=new Date().toString();console.log(c+": clickover hide");this.hide()}});b.fn.clickover=function(c){return this.each(function(){var f=b(this),e=f.data("clickover"),d=typeof c=="object"&&c;if(!e){f.data("clickover",(e=new a(this,d)))}if(typeof c=="string"){e[c]()}})};b.fn.clickover.Constructor=a;b.fn.clickover.defaults=b.extend({},b.fn.popover.defaults,{trigger:"manual",auto_close:0,global_close:1,esc_close:1,onShown:null,onHidden:null,width:null,height:null,tip_id:null,class_name:"clickover",allow_multiple:0})}(window.jQuery);var q=null;window.PR_SHOULD_USE_CONTINUATION=!0;(function(){function d(G){function x(K){var L=K.charCodeAt(0);if(L!==92){return L}var J=K.charAt(1);return(L=k[J])?L:"0"<=J&&J<="7"?parseInt(K.substring(1),8):J==="u"||J==="x"?parseInt(K.substring(2),16):K.charCodeAt(1)}function D(J){if(J<32){return(J<16?"\\x0":"\\x")+J.toString(16)}J=String.fromCharCode(J);if(J==="\\"||J==="-"||J==="["||J==="]"){J="\\"+J}return J}function B(K){for(var N=K.substring(1,K.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),K=[],J=[],Q=N[0]==="^",R=Q?1:0,M=N.length;R<M;++R){var L=N[R];if(/\\[bdsw]/i.test(L)){K.push(L)}else{var L=x(L),O;R+2<M&&"-"===N[R+1]?(O=x(N[R+2]),R+=2):O=L;J.push([L,O]);O<65||L>122||(O<65||L>90||J.push([Math.max(65,L)|32,Math.min(O,90)|32]),O<97||L>122||J.push([Math.max(97,L)&-33,Math.min(O,122)&-33]))}}J.sort(function(S,T){return S[0]-T[0]||T[1]-S[1]});N=[];L=[NaN,NaN];for(R=0;R<J.length;++R){M=J[R],M[0]<=L[1]+1?L[1]=Math.max(L[1],M[1]):N.push(L=M)}J=["["];Q&&J.push("^");J.push.apply(J,K);for(R=0;R<N.length;++R){M=N[R],J.push(D(M[0])),M[1]>M[0]&&(M[1]+1>M[0]&&J.push("-"),J.push(D(M[1])))}J.push("]");return J.join("")}function F(K){for(var N=K.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),J=N.length,O=[],Q=0,M=0;Q<J;++Q){var L=N[Q];L==="("?++M:"\\"===L.charAt(0)&&(L=+L.substring(1))&&L<=M&&(O[L]=-1)}for(Q=1;Q<O.length;++Q){-1===O[Q]&&(O[Q]=++H)}for(M=Q=0;Q<J;++Q){L=N[Q],L==="("?(++M,O[M]===void 0&&(N[Q]="(?:")):"\\"===L.charAt(0)&&(L=+L.substring(1))&&L<=M&&(N[Q]="\\"+O[M])}for(M=Q=0;Q<J;++Q){"^"===N[Q]&&"^"!==N[Q+1]&&(N[Q]="")}if(K.ignoreCase&&I){for(Q=0;Q<J;++Q){L=N[Q],K=L.charAt(0),L.length>=2&&K==="["?N[Q]=B(L):K!=="\\"&&(N[Q]=L.replace(/[A-Za-z]/g,function(R){R=R.charCodeAt(0);return"["+String.fromCharCode(R&-33,R|32)+"]"}))}}return N.join("")}for(var H=0,I=!1,A=!1,v=0,E=G.length;v<E;++v){var C=G[v];if(C.ignoreCase){A=!0}else{if(/[a-z]/i.test(C.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){I=!0;A=!1;break}}}for(var k={b:8,t:9,n:10,v:11,f:12,r:13},w=[],v=0,E=G.length;v<E;++v){C=G[v];if(C.global||C.multiline){throw Error(""+C)}w.push("(?:"+F(C)+")")}return RegExp(w.join("|"),A?"gi":"g")}function c(C){function v(F){switch(F.nodeType){case 1:if(A.test(F.className)){break}for(var G=F.firstChild;G;G=G.nextSibling){v(G)}G=F.nodeName;if("BR"===G||"LI"===G){x[E]="\n",D[E<<1]=B++,D[E++<<1|1]=F}break;case 3:case 4:G=F.nodeValue,G.length&&(G=k?G.replace(/\r\n?/g,"\n"):G.replace(/[\t\n\r ]+/g," "),x[E]=G,D[E<<1]=B,B+=G.length,D[E++<<1|1]=F)}}var A=/(?:^|\s)nocode(?:\s|$)/,x=[],B=0,D=[],E=0,w;C.currentStyle?w=C.currentStyle.whiteSpace:window.getComputedStyle&&(w=document.defaultView.getComputedStyle(C,q).getPropertyValue("white-space"));var k=w&&"pre"===w.substring(0,3);v(C);return{a:x.join("").replace(/\n$/,""),c:D}}function y(v,k,x,w){k&&(v={a:k,d:v},x(v),w.push.apply(w,v.e))}function h(v,k){function A(R){for(var G=R.d,D=[G,"pln"],M=0,K=R.a.match(B)||[],C={},F=0,O=K.length;F<O;++F){var L=K[F],Q=C[L],E=void 0,N;if(typeof Q==="string"){N=!1}else{var J=x[L.charAt(0)];if(J){E=L.match(J[1]),Q=J[0]}else{for(N=0;N<w;++N){if(J=k[N],E=L.match(J[1])){Q=J[0];break}}E||(Q="pln")}if((N=Q.length>=5&&"lang-"===Q.substring(0,5))&&!(E&&typeof E[1]==="string")){N=!1,Q="src"}N||(C[L]=Q)}J=M;M+=L.length;if(N){N=E[1];var I=L.indexOf(N),H=I+N.length;E[2]&&(H=L.length-E[2].length,I=H-N.length);Q=Q.substring(5);y(G+J,L.substring(0,I),A,D);y(G+J+I,N,t(Q,N),D);y(G+J+H,L.substring(H),A,D)}else{D.push(G+J,Q)}}R.e=D}var x={},B;(function(){for(var H=v.concat(k),C=[],G={},I=0,F=H.length;I<F;++I){var E=H[I],J=E[3];if(J){for(var D=J.length;--D>=0;){x[J.charAt(D)]=E}}E=E[1];J=""+E;G.hasOwnProperty(J)||(C.push(E),G[J]=q)}C.push(/[\S\s]/);B=d(C)})();var w=k.length;return A}function p(v){var k=[],x=[];v.tripleQuotedStrings?k.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):v.multiLineStrings?k.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):k.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]);v.verbatimStrings&&x.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var w=v.hashComments;w&&(v.cStyleComments?(w>1?k.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):k.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),x.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):k.push(["com",/^#[^\n\r]*/,q,"#"]));v.cStyleComments&&(x.push(["com",/^\/\/[^\n\r]*/,q]),x.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q]));v.regexLiterals&&x.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]);(w=v.types)&&x.push(["typ",w]);v=(""+v.keywords).replace(/^ | $/g,"");v.length&&x.push(["kwd",RegExp("^(?:"+v.replace(/[\s,]+/g,"|")+")\\b"),q]);k.push(["pln",/^\s+/,q," \r\n\t\xa0"]);x.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'./@\\`]*/,q]);return h(k,x)}function s(I,A){function F(L){switch(L.nodeType){case 1:if(C.test(L.className)){break}if("BR"===L.nodeName){D(L),L.parentNode&&L.parentNode.removeChild(L)}else{for(L=L.firstChild;L;L=L.nextSibling){F(L)}}break;case 3:case 4:if(w){var k=L.nodeValue,M=k.match(J);if(M){var N=k.substring(0,M.index);L.nodeValue=N;(k=k.substring(M.index+M[0].length))&&L.parentNode.insertBefore(K.createTextNode(k),L.nextSibling);D(L);N||L.parentNode.removeChild(L)}}}}function D(L){function k(N,T){var S=T?N.cloneNode(!1):N,R=N.parentNode;if(R){var R=k(R,1),Q=N.nextSibling;R.appendChild(S);for(var O=Q;O;O=Q){Q=O.nextSibling,R.appendChild(O)}}return S}for(;!L.nextSibling;){if(L=L.parentNode,!L){return}}for(var L=k(L.nextSibling,0),M;(M=L.parentNode)&&M.nodeType===1;){L=M}G.push(L)}var C=/(?:^|\s)nocode(?:\s|$)/,J=/\r\n?|\n/,K=I.ownerDocument,B;I.currentStyle?B=I.currentStyle.whiteSpace:window.getComputedStyle&&(B=K.defaultView.getComputedStyle(I,q).getPropertyValue("white-space"));var w=B&&"pre"===B.substring(0,3);for(B=K.createElement("LI");I.firstChild;){B.appendChild(I.firstChild)}for(var G=[B],E=0;E<G.length;++E){F(G[E])}A===(A|0)&&G[0].setAttribute("value",A);var v=K.createElement("OL");v.className="linenums";for(var x=Math.max(0,A-1|0)||0,E=0,H=G.length;E<H;++E){B=G[E],B.className="L"+(E+x)%10,B.firstChild||B.appendChild(K.createTextNode("\xa0")),v.appendChild(B)}I.appendChild(v)}function P(v,k){for(var x=k.length;--x>=0;){var w=k[x];z.hasOwnProperty(w)?window.console&&console.warn("cannot override language handler %s",w):z[w]=v}}function t(v,k){if(!v||!z.hasOwnProperty(v)){v=/^\s*</.test(k)?"default-markup":"default-code"}return z[v]}function r(Y){var L=Y.g;try{var U=c(Y.h),R=U.a;Y.a=R;Y.c=U.c;Y.d=0;t(L,R)(Y);var N=/\bMSIE\b/.test(navigator.userAgent),L=/\n/g,F=Y.a,G=F.length,U=0,M=Y.c,I=M.length,R=0,V=Y.e,S=V.length,Y=0;V[S]=G;var H,K;for(K=H=0;K<S;){V[K]!==V[K+2]?(V[H++]=V[K++],V[H++]=V[K++]):K+=2}S=H;for(K=H=0;K<S;){for(var A=V[K],T=V[K+1],X=K+2;X+2<=S&&V[X+1]===T;){X+=2}V[H++]=A;V[H++]=T;K=X}for(V.length=H;R<I;){var J=M[R+2]||G,W=V[Y+2]||G,X=Math.min(J,W),Q=M[R+1],O;if(Q.nodeType!==1&&(O=F.substring(U,X))){N&&(O=O.replace(L,"\r"));Q.nodeValue=O;var E=Q.ownerDocument,D=E.createElement("SPAN");D.className=V[Y+1];var B=Q.parentNode;B.replaceChild(D,Q);D.appendChild(Q);U<J&&(M[R+1]=Q=E.createTextNode(F.substring(X,J)),B.insertBefore(Q,D.nextSibling))}U=X;U>=J&&(R+=2);U>=W&&(Y+=2)}}catch(C){"console" in window&&console.log(C&&C.stack?C.stack:C)}}var n=["break,continue,do,else,for,if,return,while"],l=[[n,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],o=[l,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],m=[l,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],j=[m,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],l=[l,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],g=[n,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],f=[n,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],n=[n,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],e=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,b=/\S/,a=p({keywords:[o,j,l,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+g,f,n],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),z={};P(a,["default-code"]);P(h([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);P(h([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);P(h([],[["atv",/^[\S\s]+/]]),["uq.val"]);P(p({keywords:o,hashComments:!0,cStyleComments:!0,types:e}),["c","cc","cpp","cxx","cyc","m"]);P(p({keywords:"null,true,false"}),["json"]);P(p({keywords:j,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:e}),["cs"]);P(p({keywords:m,cStyleComments:!0}),["java"]);P(p({keywords:n,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]);P(p({keywords:g,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]);P(p({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]);P(p({keywords:f,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]);P(p({keywords:l,cStyleComments:!0,regexLiterals:!0}),["js"]);P(p({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);P(h([],[["str",/^[\S\s]+/]]),["regex"]);window.prettyPrintOne=function(v,k,x){var w=document.createElement("PRE");w.innerHTML=v;x&&s(w,x);r({g:k,i:x,h:w});return w.innerHTML};window.prettyPrint=function(F){function w(){for(var M=window.PR_SHOULD_USE_CONTINUATION?x.now()+250:Infinity;v<B.length&&x.now()<M;v++){var Q=B[v],J=Q.className;if(J.indexOf("prettyprint")>=0){var J=J.match(C),L,I;if(I=!J){I=Q;for(var N=void 0,O=I.firstChild;O;O=O.nextSibling){var K=O.nodeType,N=K===1?N?I:O:K===3?b.test(O.nodeValue)?I:N:N}I=(L=N===I?void 0:N)&&"CODE"===L.tagName}I&&(J=L.className.match(C));J&&(J=J[1]);I=!1;for(N=Q.parentNode;N;N=N.parentNode){if((N.tagName==="pre"||N.tagName==="code"||N.tagName==="xmp")&&N.className&&N.className.indexOf("prettyprint")>=0){I=!0;break}}I||((I=(I=Q.className.match(/\blinenums\b(?::(\d+))?/))?I[1]&&I[1].length?+I[1]:!0:!1)&&s(Q,I),E={g:J,h:Q,i:I},r(E))}}v<B.length?setTimeout(w,250):F&&F()}for(var D=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],B=[],A=0;A<D.length;++A){for(var G=0,H=D[A].length;G<H;++G){B.push(D[A][G])}}var D=q,x=Date;x.now||(x={now:function(){return +new Date}});var v=0,E,C=/\blang(?:uage)?-([\w.]+)(?!\S)/;w()};window.PR={createSimpleLexer:h,registerLangHandler:P,sourceDecorator:p,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}})();(function(){var z=this;var l=z._;var G={};var F=Array.prototype,f=Object.prototype,t=Function.prototype;var K=F.push,p=F.slice,B=F.concat,d=f.toString,k=f.hasOwnProperty;var O=F.forEach,s=F.map,H=F.reduce,c=F.reduceRight,b=F.filter,E=F.every,r=F.some,o=F.indexOf,m=F.lastIndexOf,x=Array.isArray,e=Object.keys,I=t.bind;var P=function(Q){if(Q instanceof P){return Q}if(!(this instanceof P)){return new P(Q)}this._wrapped=Q};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=P}exports._=P}else{z._=P}P.VERSION="1.4.3";var L=P.each=P.forEach=function(V,U,T){if(V==null){return}if(O&&V.forEach===O){V.forEach(U,T)}else{if(V.length===+V.length){for(var S=0,Q=V.length;S<Q;S++){if(U.call(T,V[S],S,V)===G){return}}}else{for(var R in V){if(P.has(V,R)){if(U.call(T,V[R],R,V)===G){return}}}}}};P.map=P.collect=function(T,S,R){var Q=[];if(T==null){return Q}if(s&&T.map===s){return T.map(S,R)}L(T,function(W,U,V){Q[Q.length]=S.call(R,W,U,V)});return Q};var g="Reduce of empty array with no initial value";P.reduce=P.foldl=P.inject=function(U,T,Q,S){var R=arguments.length>2;if(U==null){U=[]}if(H&&U.reduce===H){if(S){T=P.bind(T,S)}return R?U.reduce(T,Q):U.reduce(T)}L(U,function(X,V,W){if(!R){Q=X;R=true}else{Q=T.call(S,Q,X,V,W)}});if(!R){throw new TypeError(g)}return Q};P.reduceRight=P.foldr=function(W,T,Q,S){var R=arguments.length>2;if(W==null){W=[]}if(c&&W.reduceRight===c){if(S){T=P.bind(T,S)}return R?W.reduceRight(T,Q):W.reduceRight(T)}var V=W.length;if(V!==+V){var U=P.keys(W);V=U.length}L(W,function(Z,X,Y){X=U?U[--V]:--V;if(!R){Q=W[X];R=true}else{Q=T.call(S,Q,W[X],X,Y)}});if(!R){throw new TypeError(g)}return Q};P.find=P.detect=function(T,S,R){var Q;D(T,function(W,U,V){if(S.call(R,W,U,V)){Q=W;return true}});return Q};P.filter=P.select=function(T,S,R){var Q=[];if(T==null){return Q}if(b&&T.filter===b){return T.filter(S,R)}L(T,function(W,U,V){if(S.call(R,W,U,V)){Q[Q.length]=W}});return Q};P.reject=function(S,R,Q){return P.filter(S,function(V,T,U){return !R.call(Q,V,T,U)},Q)};P.every=P.all=function(T,S,R){S||(S=P.identity);var Q=true;if(T==null){return Q}if(E&&T.every===E){return T.every(S,R)}L(T,function(W,U,V){if(!(Q=Q&&S.call(R,W,U,V))){return G}});return !!Q};var D=P.some=P.any=function(T,S,R){S||(S=P.identity);var Q=false;if(T==null){return Q}if(r&&T.some===r){return T.some(S,R)}L(T,function(W,U,V){if(Q||(Q=S.call(R,W,U,V))){return G}});return !!Q};P.contains=P.include=function(R,Q){if(R==null){return false}if(o&&R.indexOf===o){return R.indexOf(Q)!=-1}return D(R,function(S){return S===Q})};P.invoke=function(R,S){var Q=p.call(arguments,2);return P.map(R,function(T){return(P.isFunction(S)?S:T[S]).apply(T,Q)})};P.pluck=function(R,Q){return P.map(R,function(S){return S[Q]})};P.where=function(R,Q){if(P.isEmpty(Q)){return[]}return P.filter(R,function(T){for(var S in Q){if(Q[S]!==T[S]){return false}}return true})};P.max=function(T,S,R){if(!S&&P.isArray(T)&&T[0]===+T[0]&&T.length<65535){return Math.max.apply(Math,T)}if(!S&&P.isEmpty(T)){return -Infinity}var Q={computed:-Infinity,value:-Infinity};L(T,function(X,U,W){var V=S?S.call(R,X,U,W):X;V>=Q.computed&&(Q={value:X,computed:V})});return Q.value};P.min=function(T,S,R){if(!S&&P.isArray(T)&&T[0]===+T[0]&&T.length<65535){return Math.min.apply(Math,T)}if(!S&&P.isEmpty(T)){return Infinity}var Q={computed:Infinity,value:Infinity};L(T,function(X,U,W){var V=S?S.call(R,X,U,W):X;V<Q.computed&&(Q={value:X,computed:V})});return Q.value};P.shuffle=function(T){var S;var R=0;var Q=[];L(T,function(U){S=P.random(R++);Q[R-1]=Q[S];Q[S]=U});return Q};var a=function(Q){return P.isFunction(Q)?Q:function(R){return R[Q]}};P.sortBy=function(T,S,Q){var R=a(S);return P.pluck(P.map(T,function(W,U,V){return{value:W,index:U,criteria:R.call(Q,W,U,V)}}).sort(function(X,W){var V=X.criteria;var U=W.criteria;if(V!==U){if(V>U||V===void 0){return 1}if(V<U||U===void 0){return -1}}return X.index<W.index?-1:1}),"value")};var w=function(V,U,R,T){var Q={};var S=a(U||P.identity);L(V,function(Y,W){var X=S.call(R,Y,W,V);T(Q,X,Y)});return Q};P.groupBy=function(S,R,Q){return w(S,R,Q,function(T,U,V){(P.has(T,U)?T[U]:(T[U]=[])).push(V)})};P.countBy=function(S,R,Q){return w(S,R,Q,function(T,U){if(!P.has(T,U)){T[U]=0}T[U]++})};P.sortedIndex=function(X,W,T,S){T=T==null?P.identity:a(T);var V=T.call(S,W);var Q=0,U=X.length;while(Q<U){var R=(Q+U)>>>1;T.call(S,X[R])<V?Q=R+1:U=R}return Q};P.toArray=function(Q){if(!Q){return[]}if(P.isArray(Q)){return p.call(Q)}if(Q.length===+Q.length){return P.map(Q,P.identity)}return P.values(Q)};P.size=function(Q){if(Q==null){return 0}return(Q.length===+Q.length)?Q.length:P.keys(Q).length};P.first=P.head=P.take=function(S,R,Q){if(S==null){return void 0}return(R!=null)&&!Q?p.call(S,0,R):S[0]};P.initial=function(S,R,Q){return p.call(S,0,S.length-((R==null)||Q?1:R))};P.last=function(S,R,Q){if(S==null){return void 0}if((R!=null)&&!Q){return p.call(S,Math.max(S.length-R,0))}else{return S[S.length-1]}};P.rest=P.tail=P.drop=function(S,R,Q){return p.call(S,(R==null)||Q?1:R)};P.compact=function(Q){return P.filter(Q,P.identity)};var A=function(R,S,Q){L(R,function(T){if(P.isArray(T)){S?K.apply(Q,T):A(T,S,Q)}else{Q.push(T)}});return Q};P.flatten=function(R,Q){return A(R,Q,[])};P.without=function(Q){return P.difference(Q,p.call(arguments,1))};P.uniq=P.unique=function(W,V,U,T){if(P.isFunction(V)){T=U;U=V;V=false}var R=U?P.map(W,U,T):W;var S=[];var Q=[];L(R,function(Y,X){if(V?(!X||Q[Q.length-1]!==Y):!P.contains(Q,Y)){Q.push(Y);S.push(W[X])}});return S};P.union=function(){return P.uniq(B.apply(F,arguments))};P.intersection=function(R){var Q=p.call(arguments,1);return P.filter(P.uniq(R),function(S){return P.every(Q,function(T){return P.indexOf(T,S)>=0})})};P.difference=function(R){var Q=B.apply(F,p.call(arguments,1));return P.filter(R,function(S){return !P.contains(Q,S)})};P.zip=function(){var Q=p.call(arguments);var T=P.max(P.pluck(Q,"length"));var S=new Array(T);for(var R=0;R<T;R++){S[R]=P.pluck(Q,""+R)}return S};P.object=function(U,S){if(U==null){return{}}var Q={};for(var T=0,R=U.length;T<R;T++){if(S){Q[U[T]]=S[T]}else{Q[U[T][0]]=U[T][1]}}return Q};P.indexOf=function(U,S,T){if(U==null){return -1}var R=0,Q=U.length;if(T){if(typeof T=="number"){R=(T<0?Math.max(0,Q+T):T)}else{R=P.sortedIndex(U,S);return U[R]===S?R:-1}}if(o&&U.indexOf===o){return U.indexOf(S,T)}for(;R<Q;R++){if(U[R]===S){return R}}return -1};P.lastIndexOf=function(U,S,T){if(U==null){return -1}var Q=T!=null;if(m&&U.lastIndexOf===m){return Q?U.lastIndexOf(S,T):U.lastIndexOf(S)}var R=(Q?T:U.length);while(R--){if(U[R]===S){return R}}return -1};P.range=function(V,T,U){if(arguments.length<=1){T=V||0;V=0}U=arguments[2]||1;var R=Math.max(Math.ceil((T-V)/U),0);var Q=0;var S=new Array(R);while(Q<R){S[Q++]=V;V+=U}return S};var J=function(){};P.bind=function(T,R){var Q,S;if(T.bind===I&&I){return I.apply(T,p.call(arguments,1))}if(!P.isFunction(T)){throw new TypeError}Q=p.call(arguments,2);return S=function(){if(!(this instanceof S)){return T.apply(R,Q.concat(p.call(arguments)))}J.prototype=T.prototype;var V=new J;J.prototype=null;var U=T.apply(V,Q.concat(p.call(arguments)));if(Object(U)===U){return U}return V}};P.bindAll=function(R){var Q=p.call(arguments,1);if(Q.length==0){Q=P.functions(R)}L(Q,function(S){R[S]=P.bind(R[S],R)});return R};P.memoize=function(S,R){var Q={};R||(R=P.identity);return function(){var T=R.apply(this,arguments);return P.has(Q,T)?Q[T]:(Q[T]=S.apply(this,arguments))}};P.delay=function(R,S){var Q=p.call(arguments,2);return setTimeout(function(){return R.apply(null,Q)},S)};P.defer=function(Q){return P.delay.apply(P,[Q,1].concat(p.call(arguments,1)))};P.throttle=function(V,X){var T,S,W,Q;var U=0;var R=function(){U=new Date;W=null;Q=V.apply(T,S)};return function(){var Y=new Date;var Z=X-(Y-U);T=this;S=arguments;if(Z<=0){clearTimeout(W);W=null;U=Y;Q=V.apply(T,S)}else{if(!W){W=setTimeout(R,Z)}}return Q}};P.debounce=function(S,U,R){var T,Q;return function(){var Y=this,X=arguments;var W=function(){T=null;if(!R){Q=S.apply(Y,X)}};var V=R&&!T;clearTimeout(T);T=setTimeout(W,U);if(V){Q=S.apply(Y,X)}return Q}};P.once=function(S){var Q=false,R;return function(){if(Q){return R}Q=true;R=S.apply(this,arguments);S=null;return R}};P.wrap=function(Q,R){return function(){var S=[Q];K.apply(S,arguments);return R.apply(this,S)}};P.compose=function(){var Q=arguments;return function(){var R=arguments;for(var S=Q.length-1;S>=0;S--){R=[Q[S].apply(this,R)]}return R[0]}};P.after=function(R,Q){if(R<=0){return Q()}return function(){if(--R<1){return Q.apply(this,arguments)}}};P.keys=e||function(S){if(S!==Object(S)){throw new TypeError("Invalid object")}var R=[];for(var Q in S){if(P.has(S,Q)){R[R.length]=Q}}return R};P.values=function(S){var Q=[];for(var R in S){if(P.has(S,R)){Q.push(S[R])}}return Q};P.pairs=function(S){var R=[];for(var Q in S){if(P.has(S,Q)){R.push([Q,S[Q]])}}return R};P.invert=function(S){var Q={};for(var R in S){if(P.has(S,R)){Q[S[R]]=R}}return Q};P.functions=P.methods=function(S){var R=[];for(var Q in S){if(P.isFunction(S[Q])){R.push(Q)}}return R.sort()};P.extend=function(Q){L(p.call(arguments,1),function(R){if(R){for(var S in R){Q[S]=R[S]}}});return Q};P.pick=function(R){var S={};var Q=B.apply(F,p.call(arguments,1));L(Q,function(T){if(T in R){S[T]=R[T]}});return S};P.omit=function(S){var T={};var R=B.apply(F,p.call(arguments,1));for(var Q in S){if(!P.contains(R,Q)){T[Q]=S[Q]}}return T};P.defaults=function(Q){L(p.call(arguments,1),function(R){if(R){for(var S in R){if(Q[S]==null){Q[S]=R[S]}}}});return Q};P.clone=function(Q){if(!P.isObject(Q)){return Q}return P.isArray(Q)?Q.slice():P.extend({},Q)};P.tap=function(R,Q){Q(R);return R};var M=function(X,W,R,S){if(X===W){return X!==0||1/X==1/W}if(X==null||W==null){return X===W}if(X instanceof P){X=X._wrapped}if(W instanceof P){W=W._wrapped}var U=d.call(X);if(U!=d.call(W)){return false}switch(U){case"[object String]":return X==String(W);case"[object Number]":return X!=+X?W!=+W:(X==0?1/X==1/W:X==+W);case"[object Date]":case"[object Boolean]":return +X==+W;case"[object RegExp]":return X.source==W.source&&X.global==W.global&&X.multiline==W.multiline&&X.ignoreCase==W.ignoreCase}if(typeof X!="object"||typeof W!="object"){return false}var Q=R.length;while(Q--){if(R[Q]==X){return S[Q]==W}}R.push(X);S.push(W);var Z=0,aa=true;if(U=="[object Array]"){Z=X.length;aa=Z==W.length;if(aa){while(Z--){if(!(aa=M(X[Z],W[Z],R,S))){break}}}}else{var V=X.constructor,T=W.constructor;if(V!==T&&!(P.isFunction(V)&&(V instanceof V)&&P.isFunction(T)&&(T instanceof T))){return false}for(var Y in X){if(P.has(X,Y)){Z++;if(!(aa=P.has(W,Y)&&M(X[Y],W[Y],R,S))){break}}}if(aa){for(Y in W){if(P.has(W,Y)&&!(Z--)){break}}aa=!Z}}R.pop();S.pop();return aa};P.isEqual=function(R,Q){return M(R,Q,[],[])};P.isEmpty=function(R){if(R==null){return true}if(P.isArray(R)||P.isString(R)){return R.length===0}for(var Q in R){if(P.has(R,Q)){return false}}return true};P.isElement=function(Q){return !!(Q&&Q.nodeType===1)};P.isArray=x||function(Q){return d.call(Q)=="[object Array]"};P.isObject=function(Q){return Q===Object(Q)};L(["Arguments","Function","String","Number","Date","RegExp"],function(Q){P["is"+Q]=function(R){return d.call(R)=="[object "+Q+"]"}});if(!P.isArguments(arguments)){P.isArguments=function(Q){return !!(Q&&P.has(Q,"callee"))}}if(typeof(/./)!=="function"){P.isFunction=function(Q){return typeof Q==="function"}}P.isFinite=function(Q){return isFinite(Q)&&!isNaN(parseFloat(Q))};P.isNaN=function(Q){return P.isNumber(Q)&&Q!=+Q};P.isBoolean=function(Q){return Q===true||Q===false||d.call(Q)=="[object Boolean]"};P.isNull=function(Q){return Q===null};P.isUndefined=function(Q){return Q===void 0};P.has=function(R,Q){return k.call(R,Q)};P.noConflict=function(){z._=l;return this};P.identity=function(Q){return Q};P.times=function(U,T,S){var Q=Array(U);for(var R=0;R<U;R++){Q[R]=T.call(S,R)}return Q};P.random=function(R,Q){if(Q==null){Q=R;R=0}return R+(0|Math.random()*(Q-R+1))};var n={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};n.unescape=P.invert(n.escape);var N={escape:new RegExp("["+P.keys(n.escape).join("")+"]","g"),unescape:new RegExp("("+P.keys(n.unescape).join("|")+")","g")};P.each(["escape","unescape"],function(Q){P[Q]=function(R){if(R==null){return""}return(""+R).replace(N[Q],function(S){return n[Q][S]})}});P.result=function(Q,S){if(Q==null){return null}var R=Q[S];return P.isFunction(R)?R.call(Q):R};P.mixin=function(Q){L(P.functions(Q),function(R){var S=P[R]=Q[R];P.prototype[R]=function(){var T=[this._wrapped];K.apply(T,arguments);return v.call(this,S.apply(P,T))}})};var C=0;P.uniqueId=function(Q){var R=""+ ++C;return Q?Q+R:R};P.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var j=/\\|'|\r|\n|\t|\u2028|\u2029/g;P.template=function(Y,T,S){S=P.defaults({},S,P.templateSettings);var U=new RegExp([(S.escape||y).source,(S.interpolate||y).source,(S.evaluate||y).source].join("|")+"|$","g");var V=0;var Q="__p+='";Y.replace(U,function(aa,ab,Z,ad,ac){Q+=Y.slice(V,ac).replace(j,function(ae){return"\\"+h[ae]});if(ab){Q+="'+\n((__t=("+ab+"))==null?'':_.escape(__t))+\n'"}if(Z){Q+="'+\n((__t=("+Z+"))==null?'':__t)+\n'"}if(ad){Q+="';\n"+ad+"\n__p+='"}V=ac+aa.length;return aa});Q+="';\n";if(!S.variable){Q="with(obj||{}){\n"+Q+"}\n"}Q="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Q+"return __p;\n";try{var R=new Function(S.variable||"obj","_",Q)}catch(W){W.source=Q;throw W}if(T){return R(T,P)}var X=function(Z){return R.call(this,Z,P)};X.source="function("+(S.variable||"obj")+"){\n"+Q+"}";return X};P.chain=function(Q){return P(Q).chain()};var v=function(Q){return this._chain?P(Q).chain():Q};P.mixin(P);L(["pop","push","reverse","shift","sort","splice","unshift"],function(Q){var R=F[Q];P.prototype[Q]=function(){var S=this._wrapped;R.apply(S,arguments);if((Q=="shift"||Q=="splice")&&S.length===0){delete S[0]}return v.call(this,S)}});L(["concat","join","slice"],function(Q){var R=F[Q];P.prototype[Q]=function(){return v.call(this,R.apply(this._wrapped,arguments))}});P.extend(P.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);var CryptoJS=CryptoJS||function(t,s){var x={},z=x.lib={},e=z.Base=function(){function b(){}return{extend:function(d){b.prototype=this;var f=new b;d&&f.mixIn(d);f.$super=this;return f},create:function(){var d=this.extend();d.init.apply(d,arguments);return d},init:function(){},mixIn:function(d){for(var f in d){d.hasOwnProperty(f)&&(this[f]=d[f])}d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.$super.extend(this)}}}(),o=z.WordArray=e.extend({init:function(b,d){b=this.words=b||[];this.sigBytes=d!=s?d:4*b.length},toString:function(b){return(b||y).stringify(this)},concat:function(f){var g=this.words,j=f.words,h=this.sigBytes,f=f.sigBytes;this.clamp();if(h%4){for(var d=0;d<f;d++){g[h+d>>>2]|=(j[d>>>2]>>>24-8*(d%4)&255)<<24-8*((h+d)%4)}}else{if(65535<j.length){for(d=0;d<f;d+=4){g[h+d>>>2]=j[d>>>2]}}else{g.push.apply(g,j)}}this.sigBytes+=f;return this},clamp:function(){var b=this.words,d=this.sigBytes;b[d>>>2]&=4294967295<<32-8*(d%4);b.length=t.ceil(d/4)},clone:function(){var b=e.clone.call(this);b.words=this.words.slice(0);return b},random:function(b){for(var d=[],f=0;f<b;f+=4){d.push(4294967296*t.random()|0)}return o.create(d,b)}}),c=x.enc={},y=c.Hex={stringify:function(g){for(var h=g.words,g=g.sigBytes,k=[],f=0;f<g;f++){var j=h[f>>>2]>>>24-8*(f%4)&255;k.push((j>>>4).toString(16));k.push((j&15).toString(16))}return k.join("")},parse:function(f){for(var g=f.length,h=[],d=0;d<g;d+=2){h[d>>>3]|=parseInt(f.substr(d,2),16)<<24-4*(d%8)}return o.create(h,g/2)}},v=c.Latin1={stringify:function(g){for(var h=g.words,g=g.sigBytes,f=[],j=0;j<g;j++){f.push(String.fromCharCode(h[j>>>2]>>>24-8*(j%4)&255))}return f.join("")},parse:function(g){for(var f=g.length,j=[],h=0;h<f;h++){j[h>>>2]|=(g.charCodeAt(h)&255)<<24-8*(h%4)}return o.create(j,f)}},r=c.Utf8={stringify:function(f){try{return decodeURIComponent(escape(v.stringify(f)))}catch(d){throw Error("Malformed UTF-8 data")}},parse:function(b){return v.parse(unescape(encodeURIComponent(b)))}},w=z.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=o.create();this._nDataBytes=0},_append:function(b){"string"==typeof b&&(b=r.parse(b));this._data.concat(b);this._nDataBytes+=b.sigBytes},_process:function(k){var j=this._data,A=j.words,p=j.sigBytes,n=this.blockSize,m=p/(4*n),m=k?t.ceil(m):t.max((m|0)-this._minBufferSize,0),k=m*n,p=t.min(4*k,p);if(k){for(var l=0;l<k;l+=n){this._doProcessBlock(A,l)}l=A.splice(0,k);j.sigBytes-=p}return o.create(l,p)},clone:function(){var b=e.clone.call(this);b._data=this._data.clone();return b},_minBufferSize:0});z.Hasher=w.extend({init:function(){this.reset()},reset:function(){w.reset.call(this);this._doReset()},update:function(b){this._append(b);this._process();return this},finalize:function(b){b&&this._append(b);this._doFinalize();return this._hash},clone:function(){var b=w.clone.call(this);b._hash=this._hash.clone();return b},blockSize:16,_createHelper:function(b){return function(d,f){return b.create(f).finalize(d)}},_createHmacHelper:function(b){return function(d,f){return a.HMAC.create(b,f).finalize(d)}}});var a=x.algo={};return x}(Math);(function(){var e=CryptoJS,d=e.lib,g=d.WordArray,d=d.Hasher,c=[],a=e.algo.SHA1=d.extend({_doReset:function(){this._hash=g.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,m){for(var s=this._hash.words,n=s[0],b=s[1],o=s[2],l=s[3],v=s[4],r=0;80>r;r++){if(16>r){c[r]=p[m+r]|0}else{var t=c[r-3]^c[r-8]^c[r-14]^c[r-16];c[r]=t<<1|t>>>31}t=(n<<5|n>>>27)+v+c[r];t=20>r?t+((b&o|~b&l)+1518500249):40>r?t+((b^o^l)+1859775393):60>r?t+((b&o|b&l|o&l)-1894007588):t+((b^o^l)-899497514);v=l;l=o;o=b<<30|b>>>2;b=n;n=t}s[0]=s[0]+n|0;s[1]=s[1]+b|0;s[2]=s[2]+o|0;s[3]=s[3]+l|0;s[4]=s[4]+v|0},_doFinalize:function(){var j=this._data,l=j.words,m=8*this._nDataBytes,k=8*j.sigBytes;l[k>>>5]|=128<<24-k%32;l[(k+64>>>9<<4)+15]=m;j.sigBytes=4*l.length;this._process()}});e.SHA1=d._createHelper(a);e.HmacSHA1=d._createHmacHelper(a)})();(function(){var b=CryptoJS,a=b.enc.Utf8;b.algo.HMAC=b.lib.Base.extend({init:function(r,t){r=this._hasher=r.create();"string"==typeof t&&(t=a.parse(t));var m=r.blockSize,e=4*m;t.sigBytes>e&&(t=r.finalize(t));for(var c=this._oKey=t.clone(),s=this._iKey=t.clone(),o=c.words,j=s.words,p=0;p<m;p++){o[p]^=1549556828,j[p]^=909522486}c.sigBytes=s.sigBytes=e;this.reset()},reset:function(){var c=this._hasher;c.reset();c.update(this._iKey)},update:function(c){this._hasher.update(c);return this},finalize:function(d){var c=this._hasher,d=c.finalize(d);c.reset();return c.finalize(this._oKey.clone().concat(d))}})})();(function(c){var b={type:"classes",insertBackLinks:true,backLinkText:"Back",startLevel:1,endLevel:6,textCallback:null};var a={init:function(g){var f=this;jQuery.extend(b,g);if(b.type!=="headings"){b.type="classes"}if(typeof(b.startLevel)!=="number"||b.startLevel<1){b.startLevel=1}if(typeof(b.endLevel)!=="number"||b.endLevel<1){b.endLevel=6}if(b.startLevel>b.endLevel){var e=b.endLevel;b.endLevel=b.startLevel;b.startLevel=e}f.empty();var h=f.attr("id")+"targetTOC";c("<a/>").attr({id:h,name:h,"class":"tocBackTarget"}).appendTo(f);var d;if(b.type==="headings"){d=":header"}else{d=".tocEntry"}c(d).each(function(m){var o=c(this);var k=1;if(b.type==="headings"){k=parseInt(this.tagName.substring(1))}else{var n=o.attr("data-tocLevel");if(n!==undefined&&parseInt(n)!==NaN){k=parseInt(n)}}if(k<b.startLevel||k>b.endLevel){return}var r="toc_"+k+"_"+m;var l=o.text();if(l===undefined){if(b.textCallback){l=b.textCallback(o)}else{l=jQuery.trim(o.text())}o.data("headingText",l)}var j=c("<a>"+b.backLinkText+"</a>").attr({"class":"tocBackLink",name:r,id:r,href:"#"+h,title:"Go back to the table of contents"});if(b.insertBackLinks!==true){j.text("")}j.appendTo(o);var s=c("<div class='TOCLine' />").attr("class","tocLevel"+k.toString());var p=c("<a>"+l+"</a>").attr({title:l,href:"#"+r,"class":"tocLink"}).appendTo(s).parent().appendTo(f)});return this.show()},disable:function(d){this.empty();if(b.insertBackLinks===true){c("a.tocBackLink").remove()}if(d!==true){this.hide()}return this},rebuild:function(){this.tocBuilder("disable");this.tocBuilder("init");return this}};c.fn.tocBuilder=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{c.error("Method "+d+" does not exist on jQuery.tocBuilder")}}}})(jQuery);(function(o,c){var j="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),f=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(p){return[p[1],p[2],p[3],p[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(p){return[2.55*p[1],2.55*p[2],2.55*p[3],p[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(p){return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(p){return[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(p){return[p[1],p[2]/100,p[3]/100,p[4]]}}],d=o.Color=function(r,s,p,t){return new o.Color.fn.parse(r,s,p,t)},h={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:true},green:{idx:1,type:"byte",empty:true},blue:{idx:2,type:"byte",empty:true},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:true},saturation:{idx:1,type:"percent",empty:true},lightness:{idx:2,type:"percent",empty:true}}}},n={"byte":{floor:true,min:0,max:255},percent:{min:0,max:1},degrees:{mod:360,floor:true}},l=h.rgba.props,m=d.support={},a,k=o.each;h.hsla.props.alpha=l.alpha;function g(s,v,r){var p=n[v.type]||{},t=v.empty||r;if(t&&s==null){return null}if(v.def&&s==null){return v.def}if(p.floor){s=~~s}else{s=parseFloat(s)}if(s==null||isNaN(s)){return v.def}if(p.mod){s=s%p.mod;return s<0?p.mod+s:s}return p.min>s?p.min:p.max<s?p.max:s}d.fn=d.prototype={constructor:d,parse:function(y,w,p,x){if(y===c){this._rgba=[null,null,null,null];return this}if(y instanceof o||y.nodeType){y=y instanceof o?y.css(w):o(y).css(w);w=c}var v=this,s=o.type(y),r=this._rgba=[],t;if(w!==c){y=[y,w,p,x];s="array"}if(s==="string"){y=y.toLowerCase();k(e,function(E,F){var D=F.re.exec(y),C=D&&F.parse(D),B,A=F.space||"rgba",z=h[A].cache;if(C){B=v[A](C);v[z]=B[z];r=v._rgba=B._rgba;return false}});if(r.length!==0){if(Math.max.apply(Math,r)===0){o.extend(r,a.transparent)}return this}y=a[y]||a._default;return this.parse(y)}if(s==="array"){k(l,function(z,A){r[A.idx]=g(y[A.idx],A)});return this}if(s==="object"){if(y instanceof d){k(h,function(z,A){if(y[A.cache]){v[A.cache]=y[A.cache].slice()}})}else{k(h,function(z,A){k(A.props,function(C,D){var B=A.cache;if(!v[B]&&A.to){if(y[C]==null||C==="alpha"){return}v[B]=A.to(v._rgba)}v[B][D.idx]=g(y[C],D,true)})})}return this}},is:function(s){var r=d(s),t=true,p=this;k(h,function(v,x){var w=r[x.cache],y;if(w){y=p[x.cache]||x.to&&x.to(p._rgba)||[];k(x.props,function(z,A){if(w[A.idx]!=null){t=(w[A.idx]==y[A.idx]);return t}})}return t});return t},_space:function(){var p=[],r=this;k(h,function(s,t){if(r[t.cache]){p.push(s)}});return p.pop()},transition:function(r,x){var s=d(r),t=s._space(),v=h[t],w=this[v.cache]||v.to(this._rgba),p=w.slice();s=s[v.cache];k(v.props,function(B,D){var A=D.idx,z=w[A],y=s[A],C=n[D.type]||{};if(y===null){return}if(z===null){p[A]=y}else{if(C.mod){if(y-z>C.mod/2){z+=C.mod}else{if(z-y>C.mod/2){z-=C.mod}}}p[D.idx]=g((y-z)*x+z,D)}});return this[t](p)},blend:function(t){if(this._rgba[3]===1){return this}var s=this._rgba.slice(),r=s.pop(),p=d(t)._rgba;return d(o.map(s,function(w,x){return(1-r)*p[x]+r*w}))},toRgbaString:function(){var r="rgba(",p=o.map(this._rgba,function(s,t){return s==null?(t>2?1:0):s});if(p[3]===1){p.pop();r="rgb("}return r+p.join(",")+")"},toHslaString:function(){var r="hsla(",p=o.map(this.hsla(),function(s,t){if(s==null){s=t>2?1:0}if(t&&t<3){s=Math.round(s*100)+"%"}return s});if(p[3]==1){p.pop();r="hsl("}return r+p.join(",")+")"},toHexString:function(p){var r=this._rgba.slice(),s=r.pop();if(p){r.push(~~(s*255))}return"#"+o.map(r,function(t,w){t=(t||0).toString(16);return t.length==1?"0"+t:t}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}};d.fn.parse.prototype=d.fn;function b(t,s,r){r=(r+1)%1;if(r*6<1){return t+(s-t)*6*r}if(r*2<1){return s}if(r*3<2){return t+(s-t)*((2/3)-r)*6}return t}h.hsla.to=function(v){if(v[0]==null||v[1]==null||v[2]==null){return[null,null,null,v[3]]}var p=v[0]/255,y=v[1]/255,z=v[2]/255,B=v[3],A=Math.max(p,y,z),w=Math.min(p,y,z),C=A-w,D=A+w,t=D*0.5,x,E;if(w===A){x=0}else{if(p===A){x=(60*(y-z)/C)+360}else{if(y===A){x=(60*(z-p)/C)+120}else{x=(60*(p-y)/C)+240}}}if(t===0||t===1){E=t}else{if(t<=0.5){E=C/D}else{E=C/(2-D)}}return[Math.round(x)%360,E,t,B==null?1:B]};h.hsla.from=function(w){if(w[0]==null||w[1]==null||w[2]==null){return[null,null,null,w[3]]}var z=w[0]/360,D=w[1],y=w[2],C=w[3],v=y<=0.5?y*(1+D):y+D-y*D,x=2*y-v,t,A,B;return[Math.round(b(x,v,z+(1/3))*255),Math.round(b(x,v,z)*255),Math.round(b(x,v,z-(1/3))*255),C]};k(h,function(r,t){var s=t.props,p=t.cache,w=t.to,v=t.from;d.fn[r]=function(B){if(w&&!this[p]){this[p]=w(this._rgba)}if(B===c){return this[p].slice()}var A=o.type(B),x=(A==="array"||A==="object")?B:arguments,z=this[p].slice(),y;k(s,function(C,E){var D=x[A==="object"?C:E.idx];if(D==null){D=z[E.idx]}z[E.idx]=g(D,E)});if(v){y=d(v(z));y[p]=z;return y}else{return d(z)}};k(s,function(x,y){if(d.fn[x]){return}d.fn[x]=function(C){var E=o.type(C),B=(x==="alpha"?(this._hsla?"hsla":"rgba"):r),A=this[B](),D=A[y.idx],z;if(E==="undefined"){return D}if(E==="function"){C=C.call(this,D);E=o.type(C)}if(C==null&&y.empty){return this}if(E==="string"){z=f.exec(C);if(z){C=D+parseFloat(z[2])*(z[1]==="+"?1:-1)}}A[y.idx]=C;return this[B](A)}})});k(j,function(p,r){o.cssHooks[r]={set:function(v,w){w=d(w);if(!m.rgba&&w._rgba[3]!==1){var s,t=r==="backgroundColor"?v.parentNode:v;do{s=o.curCSS(t,"backgroundColor")}while((s===""||s==="transparent")&&(t=t.parentNode)&&t.style);w=w.blend(s&&s!=="transparent"?s:"_default")}w=w.toRgbaString();v.style[r]=w}};o.fx.step[r]=function(s){if(!s.colorInit){s.start=d(s.elem,r);s.end=d(s.end);s.colorInit=true}o.cssHooks[r].set(s.elem,s.start.transition(s.end,s.pos))}});o(function(){var r=document.createElement("div"),p=r.style;p.cssText="background-color:rgba(1,1,1,.5)";m.rgba=p.backgroundColor.indexOf("rgba")>-1});a=o.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);
/*!
 * jQuery Cookie Plugin v1.2
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(e,b,f){var a=/\+/g;function d(g){return g}function c(g){return decodeURIComponent(g.replace(a," "))}e.cookie=function(l,k,p){if(k!==f&&!/Object/.test(Object.prototype.toString.call(k))){p=e.extend({},e.cookie.defaults,p);if(k===null){p.expires=-1}if(typeof p.expires==="number"){var m=p.expires,o=p.expires=new Date();o.setDate(o.getDate()+m)}k=String(k);return(b.cookie=[encodeURIComponent(l),"=",p.raw?k:encodeURIComponent(k),p.expires?"; expires="+p.expires.toUTCString():"",p.path?"; path="+p.path:"",p.domain?"; domain="+p.domain:"",p.secure?"; secure":""].join(""))}p=k||e.cookie.defaults||{};var g=p.raw?d:c;var n=b.cookie.split("; ");for(var j=0,h;(h=n[j]&&n[j].split("="));j++){if(g(h.shift())===l){return g(h.join("="))}}return null};e.cookie.defaults={};e.removeCookie=function(h,g){if(e.cookie(h,g)!==null){e.cookie(h,null,g);return true}return false}})(jQuery,document);
/*!
 ICanHaz.js version 0.10.1 -- by @HenrikJoreteg
 More info at: http://icanhazjs.com
 */
(function(){var a=function(){var b=Object.prototype.toString;Array.isArray=Array.isArray||function(l){return b.call(l)=="[object Array]"};var k=String.prototype.trim,c;if(k){c=function(l){return l==null?"":k.call(l)}}else{var d,h;if((/\S/).test("\xA0")){d=/^[\s\xA0]+/;h=/[\s\xA0]+$/}else{d=/^\s+/;h=/\s+$/}c=function(l){return l==null?"":l.toString().replace(d,"").replace(h,"")}}var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function j(l){return String(l).replace(/&(?!\w+;)|[<>"']/g,function(m){return g[m]||m})}var f={};var e=function(){};e.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(o,n,m,p){if(!p){this.context=n;this.buffer=[]}if(!this.includes("",o)){if(p){return o}else{this.send(o);return}}o=this.render_pragmas(o);var l=this.render_section(o,n,m);if(l===false){l=this.render_tags(o,n,m,p)}if(p){return l}else{this.sendLines(l)}},send:function(l){if(l!==""){this.buffer.push(l)}},sendLines:function(n){if(n){var l=n.split("\n");for(var m=0;m<l.length;m++){this.send(l[m])}}},render_pragmas:function(l){if(!this.includes("%",l)){return l}var n=this;var m=this.getCachedRegex("render_pragmas",function(p,o){return new RegExp(p+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+o,"g")});return l.replace(m,function(r,o,p){if(!n.pragmas_implemented[o]){throw ({message:"This implementation of mustache doesn't understand the '"+o+"' pragma"})}n.pragmas[o]={};if(p){var s=p.split("=");n.pragmas[o][s[0]]=s[1]}return""})},render_partial:function(l,n,m){l=c(l);if(!m||m[l]===undefined){throw ({message:"unknown_partial '"+l+"'"})}if(!n||typeof n[l]!="object"){return this.render(m[l],n,m,true)}return this.render(m[l],n[l],m,true)},render_section:function(n,m,l){if(!this.includes("#",n)&&!this.includes("^",n)){return false}var p=this;var o=this.getCachedRegex("render_section",function(s,r){return new RegExp("^([\\s\\S]*?)"+s+"(\\^|\\#)\\s*(.+)\\s*"+r+"\n*([\\s\\S]*?)"+s+"\\/\\s*\\3\\s*"+r+"\\s*([\\s\\S]*)$","g")});return n.replace(o,function(v,z,y,t,w,s){var B=z?p.render_tags(z,m,l,true):"",x=s?p.render(s,m,l,true):"",r,A=p.find(t,m);if(y==="^"){if(!A||Array.isArray(A)&&A.length===0){r=p.render(w,m,l,true)}else{r=""}}else{if(y==="#"){if(Array.isArray(A)){r=p.map(A,function(C){return p.render(w,p.create_context(C),l,true)}).join("")}else{if(p.is_object(A)){r=p.render(w,p.create_context(A),l,true)}else{if(typeof A=="function"){r=A.call(m,w,function(C){return p.render(C,m,l,true)})}else{if(A){r=p.render(w,m,l,true)}else{r=""}}}}}}return B+r+x})},render_tags:function(v,l,n,p){var o=this;var t=function(){return o.getCachedRegex("render_tags",function(y,x){return new RegExp(y+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+x+"+","g")})};var r=t();var s=function(z,x,y){switch(x){case"!":return"";case"=":o.set_delimiters(y);r=t();return"";case">":return o.render_partial(y,l,n);case"{":case"&":return o.find(y,l);default:return j(o.find(y,l))}};var w=v.split("\n");for(var m=0;m<w.length;m++){w[m]=w[m].replace(r,s,this);if(!p){this.send(w[m])}}if(p){return w.join("\n")}},set_delimiters:function(m){var l=m.split(" ");this.otag=this.escape_regex(l[0]);this.ctag=this.escape_regex(l[1])},escape_regex:function(m){if(!arguments.callee.sRE){var l=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+l.join("|\\")+")","g")}return m.replace(arguments.callee.sRE,"\\$1")},find:function(n,o){n=c(n);function m(r){return r===false||r===0||r}var p;if(n.match(/([a-z_]+)\./ig)){var l=this.walk_context(n,o);if(m(l)){p=l}}else{if(m(o[n])){p=o[n]}else{if(m(this.context[n])){p=this.context[n]}}}if(typeof p=="function"){return p.apply(o)}if(p!==undefined){return p}return""},walk_context:function(l,m){var p=l.split(".");var o=(m[p[0]]!=undefined)?m:this.context;var n=o[p.shift()];while(n!=undefined&&p.length>0){o=n;n=n[p.shift()]}if(typeof n=="function"){return n.apply(o)}return n},includes:function(m,l){return l.indexOf(this.otag+m)!=-1},create_context:function(m){if(this.is_object(m)){return m}else{var n=".";if(this.pragmas["IMPLICIT-ITERATOR"]){n=this.pragmas["IMPLICIT-ITERATOR"].iterator}var l={};l[n]=m;return l}},is_object:function(l){return l&&typeof l=="object"},map:function(s,o){if(typeof s.map=="function"){return s.map(o)}else{var p=[];var m=s.length;for(var n=0;n<m;n++){p.push(o(s[n]))}return p}},getCachedRegex:function(m,p){var o=f[this.otag];if(!o){o=f[this.otag]={}}var l=o[this.ctag];if(!l){l=o[this.ctag]={}}var n=l[m];if(!n){n=l[m]=p(this.otag,this.ctag)}return n}};return({name:"mustache.js",version:"0.4.0",to_html:function(n,l,m,p){var o=new e();if(p){o.send=p}o.render(n,l||{},m);if(!p){return o.buffer.join("\n")}}})}();
/*!
     ICanHaz.js -- by @HenrikJoreteg
     */
(function(){function b(e){if("".trim){return e.trim()}else{return e.replace(/^\s+/,"").replace(/\s+$/,"")}}var c={VERSION:"0.10.1",templates:{},$:(typeof window!=="undefined")?window.jQuery||window.Zepto||null:null,addTemplate:function(e,g){if(typeof e==="object"){for(var f in e){this.addTemplate(f,e[f])}return}if(c[e]){console.error("Invalid name: "+e+".")}else{if(c.templates[e]){console.error('Template "'+e+'  " exists')}else{c.templates[e]=g;c[e]=function(k,j){k=k||{};var h=a.to_html(c.templates[e],k,c.templates);return(c.$&&!j)?c.$(h):h}}}},clearAll:function(){for(var e in c.templates){delete c[e]}c.templates={}},refresh:function(){c.clearAll();c.grabTemplates()},grabTemplates:function(){var j,f,e=document.getElementsByTagName("script"),g,h=[];for(j=0,f=e.length;j<f;j++){g=e[j];if(g&&g.innerHTML&&g.id&&(g.type==="text/html"||g.type==="text/x-icanhaz")){c.addTemplate(g.id,b(g.innerHTML));h.unshift(g)}}for(j=0,f=h.length;j<f;j++){h[j].parentNode.removeChild(h[j])}}};if(typeof require!=="undefined"){module.exports=c}else{window.ich=c}if(typeof document!=="undefined"){if(c.$){c.$(function(){c.grabTemplates()})}else{var d=function(){c.grabTemplates()};if(document.addEventListener){document.addEventListener("DOMContentLoaded",d,true)}else{if(document.attachEvent){document.attachEvent("DOMContentLoaded",d)}}}}})()})();if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){if(this==null){throw new TypeError()}var d=Object(this);var a=d.length>>>0;if(a===0){return -1}var e=0;if(arguments.length>0){e=Number(arguments[1]);if(e!=e){e=0}else{if(e!=0&&e!=Infinity&&e!=-Infinity){e=(e>0||-1)*Math.floor(Math.abs(e))}}}if(e>=a){return -1}var b=e>=0?e:Math.max(a-Math.abs(e),0);for(;b<a;b++){if(b in d&&d[b]===c){return b}}return -1}}Array.prototype.unique=function(){var d={},b,a=this.length,c=[];for(b=0;b<a;b+=1){d[this[b]]=this[b]}for(b in d){c.push(d[b])}return c};var omitUndefined=function(a){return _.omit(a,"undefined")};if(!Array.prototype.filter){Array.prototype.filter=function(b){if(this==null){throw new TypeError()}var f=Object(this);var a=f.length>>>0;if(typeof b!="function"){throw new TypeError()}var e=[];var d=arguments[1];for(var c=0;c<a;c++){if(c in f){var g=f[c];if(b.call(d,g,c,f)){e.push(g)}}}return e}}if(!Array.prototype.map){Array.prototype.map=function(j,h){var b,a,c;if(this==null){throw new TypeError(" this is null or not defined")}var e=Object(this);var f=e.length>>>0;if(typeof j!=="function"){throw new TypeError(j+" is not a function")}if(h){b=h}a=new Array(f);c=0;while(c<f){var d,g;if(c in e){d=e[c];g=j.call(b,d,c,e);a[c]=g}c++}return a}}var Award=function(b,a,c){this.audience=b;this.engagementType=a;this.metrics=c;this.init()};Award.prototype={engagementTypeNounsList:{viewed:"views",discussed:"discussion",saved:"saves",cited:"citation",recommended:"recommendation"},init:function(){this.engagementTypeNoun=this.engagementTypeNounsList[this.engagementType];this.topMetric=this.getTopMetric(this.metrics);this.isHighly=this.isHighly(this.metrics);this.displayAudience=this.audience.replace("public","the public")},isHighly:function(a){return _.some(a,function(b){if(typeof b.percentiles==="undefined"){return false}else{if(b.percentiles.CI95_lower>=75&&b.actualCount>=b.minForAward){return true}else{return false}}})},getTopMetric:function(a){var b=_.max(a,function(d){return d.actualCount}).actualCount;var c=_.max(a,function(d){var e=(d.actualCount/b-0.0001);if(typeof d.percentiles=="undefined"){return e}else{return d.percentiles.CI95_lower+e}});return c}};function Item(itemData,itemView,$){this.makeAwardsList=function(metrics){var awards=[];var audiencesObj=omitUndefined(_.groupBy(metrics,"audience"));_.each(audiencesObj,function(audienceMetrics,audienceName){var engagementTypesObj=omitUndefined(_.groupBy(audienceMetrics,"engagementType"));_.each(engagementTypesObj,function(engagementType,engagementTypeName){awards.push(new Award(audienceName,engagementTypeName,engagementType))})});if(awards.length){awards.big=["here is an item"];awards.any=["here is an item"]}return awards};this.init=function(itemData,itemView){var metricInfoKeys=["name","audience","engagementType","display","minForAward"];var metricInfo=_.object(_.map([["citeulike:bookmarks","scholars","saved","badge",3],["delicious:bookmarks","public","saved","badge",3],["dryad:most_downloaded_file"],["dryad:package_views","scholars","viewed","badge",3],["dryad:total_downloads","scholars","viewed","badge",3],["figshare:views","scholars","viewed","badge",3],["figshare:downloads","scholars","viewed","badge",3],["figshare:shares","scholars","discussed","badge",3],["facebook:shares","public","discussed","badge",3],["facebook:comments","public","discussed","badge",3],["facebook:likes","public","discussed","badge",3],["facebook:clicks","public","discussed","badge",3],["github:forks","public","cited","badge",3],["github:watchers","public","saved","badge",3],["mendeley:career_stage"],["mendeley:country"],["mendeley:discipline"],["mendeley:student_readers"],["mendeley:developing_countries"],["mendeley:groups"],["mendeley:readers","scholars","saved","badge",3],["pmc:pdf_downloads"],["pmc:abstract_views"],["pmc:fulltext_views"],["pmc:unique_ip_views"],["pmc:figure_views"],["pmc:suppdata_views"],["plosalm:crossref"],["plosalm:html_views","public","viewed","badge",3],["plosalm:pdf_views","scholars","viewed","badge",3],["plosalm:pmc_abstract"],["plosalm:pmc_figure"],["plosalm:pmc_full-text"],["plosalm:pmc_pdf"],["plosalm:pmc_supp-data"],["plosalm:pmc_unique-ip"],["plosalm:pubmed_central"],["plosalm:scopus"],["pubmed:f1000","scholars","recommended","badge",1],["pubmed:pmc_citations","scholars","cited",0,0],["pubmed:pmc_citations_editorials","scholars","recommended",0,0],["pubmed:pmc_citations_reviews","scholars","cited",0,0],["scienceseeker:blog_posts","scholars","discussed","badge",0],["scopus:citations","scholars","cited","badge",3],["researchblogging:blogs","scholars","discussed",0,0],["slideshare:comments","public","discussed","badge",3],["slideshare:downloads","public","viewed","badge",3],["slideshare:favorites","public","recommended","badge",3],["slideshare:views","public","viewed","badge",3],["topsy:influential_tweets","public","discussed","zoom",0],["topsy:tweets","public","discussed","badge",3],["wikipedia:mentions","public","cited","badge",1]],function(metric){return[metric[0],_.object(metricInfoKeys,metric)]}));this.metricInfo=metricInfo;this.itemView=itemView;if(itemData.hasOwnProperty("_id")){this.dict=this.processDict(itemData)}else{this.dict=false;this.itemId=itemData}};this.developing_countries="Afghanistan|Albania|Algeria|Angola|Antigua and Barbuda|Argentina|Armenia|Azerbaijan|Bahamas|Bahrain|Bangladesh|Barbados|Belarus|Belize|Benin|Bhutan|Bolivia|Bosnia and Herzegovina|Botswana|Brazil|Brunei|Bulgaria|Burkina Faso|Burma|Burundi|Cambodia|Cameroon|Cape Verde|Central African Republic|Chad|Chile|China|Colombia|Comoros|Cuba|Democratic Republic of the Congo|Republic of the Congo|Costa Rica|C\u00F4te d Ivoire|Croatia|Djibouti|Dominica|Dominican Republic|Ecuador|Egypt|El Salvador|Equatorial Guinea|Eritrea|Ethiopia|Fiji|Gabon|The Gambia|Georgia|Ghana|Grenada|Guatemala|Guinea|Guinea-Bissau|Guyana|Haiti|Honduras|Hungary|India|Indonesia|Iran|Iraq|Jamaica|Jordan|Kazakhstan|Kenya|Kiribati|Kuwait|Kyrgyzstan|Laos|Latvia|Lebanon|Lesotho|Liberia|Libya|Lithuania|Macedonia|Madagascar|Malawi|Malaysia|Maldives|Mali|Marshall Islands|Mauritania|Mauritius|Mexico|Federated States of Micronesia|Moldova|Mongolia|Montenegro|Morocco|Mozambique|Namibia|Nauru|Nepal|Nicaragua|Niger|Nigeria|North Korea|Oman|Pakistan|Palau|Panama|Papua New Guinea|Paraguay|Peru|Philippines|Poland|Qatar|Romania|Russia|Rwanda|Saint Kitts and Nevis|Saint Lucia|Saint Vincent and the Grenadines|Samoa|S\u00E3o Tom\u00E9 and Pr\u00EDncipe|Saudi Arabia|Senegal|Serbia|Seychelles|Sierra Leone|Solomon Islands|Somalia|South Africa|South Sudan|Sri Lanka|Sudan|Suriname|Swaziland|Syria|Tajikistan|Tanzania|Thailand|Timor-Leste|Togo|Tonga|Trinidad and Tobago|Tunisia|Turkey|Turkmenistan|Tuvalu|Uganda|Ukraine|United Arab Emirates|Uruguay|Uzbekistan|Vanuatu|Venezuela|Vietnam|Yemen|Zambia|Zimbabwe";this.render=function(){return this.itemView.render(this.dict)};this.addMetricsInfoDataToMetrics=function(metrics){var metricInfo=this.metricInfo;_.map(metrics,function(metric,metricName){_.extend(metric,metricInfo[metricName])});return metrics};this.get_mendeley_percent=function(metricDict,key_substring){if(metricDict==undefined){return 0}var re=new RegExp(key_substring,"i");mendeleyRelevantKeys=metricDict.values.raw.filter(function(x){return x.name.match(re)});if(typeof mendeleyRelevantKeys[0]=="undefined"){return(0)}mendeleyPercentages=mendeleyRelevantKeys.map(function(x){return x.value});if(typeof mendeleyPercentages[0]=="undefined"){return(0)}sum=eval(mendeleyPercentages.join("+"));return(sum)};this.mendeley_reader_subset_count=function(metricsDict,subset_type){if(typeof metricsDict["mendeley:readers"]=="undefined"){return(0)}if(subset_type=="student"){percent=this.get_mendeley_percent(metricsDict["mendeley:career_stage"],"student")}if(subset_type=="developing_countries"){percent=this.get_mendeley_percent(metricsDict["mendeley:country"],this.developing_countries)}total_mendeley_readers=metricsDict["mendeley:readers"].values.raw;total=Math.round(total_mendeley_readers*percent/100);return(total)};this.update_metric=function(metric,display_name,value){metric.static_meta["display_name"]=display_name;metric.values={};metric.values["raw"]=value;return(metric)};this.add_derived_metrics=function(metricsDict){var total=this.mendeley_reader_subset_count(metricsDict,"student");if(total>0){var templateMetric=$.extend(true,{},metricsDict["mendeley:readers"]);var newMetric=this.update_metric(templateMetric,"readers: students",total);metricsDict["mendeley:student_readers"]=newMetric}var total=this.mendeley_reader_subset_count(metricsDict,"developing_countries");if(total>0){var templateMetric=$.extend(true,[],metricsDict["mendeley:readers"]);var newMetric=this.update_metric(templateMetric,"readers: developing countries",total);metricsDict["mendeley:developing_countries"]=newMetric}return(metricsDict)};this.getMetricPercentiles=function(metricsDict){for(var metricName in metricsDict){for(var normRefSetName in metricsDict[metricName].values){if(normRefSetName.indexOf("raw")==-1){metricsDict[metricName].percentiles=metricsDict[metricName].values[normRefSetName];metricsDict[metricName].topPercent=100-metricsDict[metricName].percentiles.CI95_lower}}}return metricsDict};this.expandMetricMetadta=function(metrics,year){var interactionDisplayNames={f1000:"recommendations",pmc_citations:"citations",html_views:"html views",pdf_views:"pdf views"};_.map(metrics,function(metric){metric.displayCount=metric.values.raw;metric.actualCount=(metric.values.raw=="Yes")?1:metric.values.raw;var plural=metric.actualCount>1;metric.environment=metric.static_meta.provider;var interaction=metric.name.split(":")[1];if(interactionDisplayNames[interaction]){interaction=interactionDisplayNames[interaction]}metric.displayInteraction=(plural)?interaction:interaction.slice(0,-1);metric.referenceSetYear=year});return metrics};this.processDict=function(dict){console.log(dict);dict.metrics=this.addMetricsInfoDataToMetrics(dict.metrics);dict.metrics=this.expandMetricMetadta(dict.metrics,dict.biblio.year);dict.metrics=this.getMetricPercentiles(dict.metrics);dict.awards=new this.makeAwardsList(dict.metrics);return dict};this.get=function(apiRoot,apiKey,successCallback,updatingCallback,noItemCallback){var thisThing=this;var id=this.itemId;var registerParam=(noItemCallback)?"":"&register=true";var url="http://"+apiRoot+"/v1/item/"+id[0]+"/"+id[1]+"?key="+apiKey+registerParam;var logIfFailedRegistration=function(data){if(registerParam){if(data.is_registered==false){console.log("Automatic registration failed for "+id[0]+":"+id[1]+": quota reached for api key '"+apiKey+"'. Contact team@impactstory.org to remedy.")}}};$.ajax({url:url,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",statusCode:{200:function(data){dict=thisThing.processDict(data);thisThing.dict=dict;successCallback(dict,id);logIfFailedRegistration(data)},210:function(data){updatingCallback(data);logIfFailedRegistration(data)},403:function(data){console.log("Invalid api key '"+apiKey+"'. Contact team@impactstory.org to remedy.");if(noItemCallback){noItemCallback(data)}},404:function(data){if(noItemCallback){noItemCallback(data)}}}})};this.create=function(apiRoot,successCallback,errorCallback){var apiKey="embed";var thisThing=this;var id=this.itemId};this.init(itemData,itemView);return true}function ItemView(a){this.sortByMetricValueDesc=function(c,b){if(typeof c.value!="number"){return 1}if(typeof b.value!="number"){return -1}if(c.value<b.value){return 1}if(c.value>b.value){return -1}return 0};this.renderBiblio=function(f,d){var e="";f.url=d;f.title=f.title||"no title";if(f.create_date){f.year=f.create_date.slice(0,4)}if(f.authors){var c=f.authors.split(",",3).join(",");if(c.length<f.authors.length){c+=" et al."}f.authors=c}var b="biblio_"+f.genre;return a(ich[b](f,true))};this.findBarLabelOffsets=function(g,b){var e=27;if(b==100){e=32}var d=b-g;if(d<e){var c=d-e;var f=c/2}else{var f=0}return f};this.findBarMargins=function(f,g){var d=7;var c=f;var e=100-g;var b=d-(g-f);if(b>0){c-=b/2;e-=b/2}return[c,e]};this.renderZoom=function(c){var b={};b.audiences=_.chain(c).groupBy("audience").map(function(f,g){return{audience:g,cells:f}}).sortBy(function(f){return f.audience}).reverse().value();var d=a(ich.zoomTable(b,true));var e=this;d.find("div.metric-perc-range.ci").each(function(){var g=a(this).find("span.endpoint.start span.value").text();var f=a(this).find("span.endpoint.end span.value").text();var j=e.findBarLabelOffsets(g,f);var h=e.findBarMargins(g,f);a(this).css({"margin-left":h[0]+"%","margin-right":h[1]+"%"}).find("span.endpoint.start").css("left",j+"px").end().find("span.endpoint.end").css("right",j+"px")});d.find("ul.metrics div.meta img").tooltip();d.find("ul.metrics div.metric-perc-range").tooltip();return d};this.renderBadges=function(b){var d=_(b).groupBy("isHighly");var c=a(ich.badges({big:d["true"],any:d["false"]}),true);c.find(".ti-badge").tooltip();return c};this.render=function(f){var e=ich.displayItem(f);var b=(f.aliases.url)?f.aliases.url[0]:false;var d=this.renderBiblio(f.biblio,b);e.find("div.biblio").append(d);var c=this.renderZoom(f.awards,true);e.find("div.zoom").append(c);var g=this.renderBadges(f.awards);e.find("div.badges").append(g);return e}}function ItemController(b){this.itemReportPageInit=function(){b("#update-report-button").remove();b("#csv-report-button").remove();b("#num-items").remove();var c=new ItemView(b);var d=new Item([reportIdNamespace,reportId],c,b);d.get(api_root,"item-report-page",this.insertRenderedItemIntoPage,function(e){console.log("still updating item report page")},function(e){alert("Sorry, this item isn't in our database yet.")})};this.insertRenderedItemIntoPage=function(d){var c=new ItemView(b);var e=c.render(d);e.find("div.zoom").show();b("<div class='genre'></div>").append(e).appendTo("#metrics div.wrapper")};var a=b("body");a.on("click","div.item-header.zoomable",function(c){if(b(c.target).hasClass("help-text")){console.log("help-text");return true}b(this).parents("li.item").find("div.zoom").slideToggle(500,function(){b(this).parents("li.item").toggleClass("zoomed")});return false});a.on("click","a.item-help",function(){b("#context").modal("show");return false})}var ajaxLoadImg="<img class='loading' src='../static/img/ajax-loader.gif' alt='loading...' />";function User(a){this.userViews=a;this.create=function(){this.userdata({colls:{}})};this.userdata=function(b){if(b){return $.cookie("userdata",JSON.stringify(b))}else{return JSON.parse($.cookie("userdata"))}};this.userkey=function(b){if(b){return $.cookie("userkey",JSON.stringify(b))}else{return JSON.parse($.cookie("userkey"))}};this.hasCreds=function(){if(this.userdata()){if(this.userdata()._id!="undefined"&&this.userkey()!=null){return true}}return false};this.addColl=function(c,b){u=this.userdata();u.colls[c]=b;return this.userdata(u)};this.clearCreds=function(){u=this.userdata();delete u._id;this.userdata(u);$.removeCookie("userkey")};this.setCreds=function(c,b){u=this.userdata();u._id=c;this.userdata(u);this.userkey(CryptoJS.HmacSHA1(b,"a8d9e12a2903eecf554").toString())};this.removeColl=function(b){u=this.userdata();delete u.colls[b];return true};this.deleteLocal=function(){$.removeCookie("userdata");$.removeCookie("userkey");this.create();this.userViews.logout()};this.syncWithServer=function(h,f){if(!this.hasCreds()){return false}if(typeof f=="undefined"){f={}}if(h=="push"){var c="PUT";var e="http://"+api_root+"/user";u=this.userdata();u.key=this.userkey();var b=JSON.stringify(u)}else{if(h=="pull"){var b="key="+this.userkey();var c="GET";var e="http://"+api_root+"/user/"+this.userdata()._id}}var d=this.userViews;var g=this;$.ajax({url:e,type:c,data:b,dataType:"json",contentType:"application/json; charset=utf-8",statusCode:{200:function(j){d.login(j._id);g.userdata(j);if(typeof f.on200!=="undefined"){f.on200()}},403:function(j){d.registerFail(j);g.clearCreds();if(typeof f.on403!=="undefined"){f.on403()}},404:function(j){g.clearCreds();d.registerFail(j);if(typeof f.on404!=="undefined"){f.on404()}},500:function(j){console.log("wo, server error.")}}})};this.getCollInfo=function(){var c=[];for(cid in this.userdata()["colls"]){c.push(cid)}if(c.length){this.userViews.startShowColls()}var b=c.join(",");var d=this;$.ajax({url:"http://"+api_root+"/collections/"+b,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",statusCode:{404:function(e){console.log("that broke. probably oughta have some error handling.")},200:function(e){d.userViews.showColls(e)}}})};this.checkUsername=function(d,b,c){$.ajax({url:"http://"+api_root+"/user/"+d,type:"GET",statusCode:{403:function(e){c()},404:function(e){b()}}})};if(this.hasCreds()){this.userViews.login(this.userdata()._id);this.syncWithServer("pull");this.create()}else{if(this.userdata()){}else{this.create()}}return true}function UserViews(){this.loginFail=function(a){console.log("login fail!")};this.login=function(a){$("#register-link, #login-link").hide().siblings("li#logged-in").show().find("span.username").html(a+"!");$("li.loading").remove();$("#inline-register").remove();console.log("logged in!")};this.finishRegistration=function(){console.log("finished registration");_gaq.push(["_trackPageview","/user/created"])};this.startRegistration=function(){$("#register-link, #login-link").hide();$("li#acct-mgt ul").append("<li class='loading'>"+ajaxLoadImg+"</li>")};this.registerFail=function(a){console.log("oh noes, registration fail!")};this.logout=function(){$("#register-link, #login-link").show().siblings("li#logged-in").hide();console.log("logged out.")};this.startShowColls=function(){$("#logged-in div.dropdown-menu").empty().append("<h3>Collections:</h3>").append(ajaxLoadImg)};this.showColls=function(d){$("div.dropdown-menu img.loading").remove();var a=$("<ul></ul>");var b=false;for(cid in d){var c='<a href="/collection/'+cid+'">'+d[cid]+"</a>";a.append("<li>"+c+"</li>");b=true}if(b){$("#logged-in div.dropdown-menu").append(a)}};this.userNameExists=function(){$("input.username.register").parents("div.control-group").addClass("error").removeClass("success").find("span.help-inline").html("sorry, that email's taken.")};this.userNameValid=function(){$("input.username.register").parents("div.control-group").addClass("success").removeClass("error").find("span.help-inline").html("looks good!")};return true}function UserController(a,b){this.user=a;this.userViews=b;this.init=function(){a=this.user;b=this.userViews;$(".acct-mgt form").submit(function(){b.startRegistration();var c=$(this).find("input.username").val();var d=$(this).find("input.pw").val();a.setCreds(c,d);var e=$(this).hasClass("register")?"push":"pull";a.syncWithServer(e);b.finishRegistration();return false});$("#logout-link").click(function(){a.deleteLocal();return false});$("li#logged-in span.username").on("click",function(){a.getCollInfo();$("#logged-in div.dropdown-menu a#logged-in").attr("data-toggle","dropdown").click()});$("input.username.register").blur(function(){if(!$(this).val()){return true}$(this).siblings("span.help-inline").empty().append(ajaxLoadImg);a.checkUsername($(this).val(),b.userNameValid,b.userNameExists)})};return true}function Genre(a){this.name=a;this.items=[];this.render=function(){var e=$(ich.genreTemplate({name:this.name},true));var f=[];var d=[];for(var c=0;c<this.items.length;c++){var b=this.items[c];if(b.dict.awards.length){f.push(b.render())}else{d.push(b.render())}}e.find("ul.items.active").append(f);e.find("ul.items.inactive").append(d);if(d.length){e.find("h4.plus-more").toggle(function(){$(this).addClass("showing").siblings("ul.items.inactive").slideDown();$(this).find("span.show-hide").html("(hide)")},function(){$(this).removeClass("showing").siblings("ul.items.inactive").slideUp();$(this).find("span.show-hide").html("(show)")}).find("span.value").html(d.length)}else{e.find("h4.plus-more").hide()}return e};return true}function GenreList(a){this.genres={};for(var c=0;c<a.length;c++){var b=a[c].dict.biblio.genre;if(!this.genres[b]){this.genres[b]=new Genre(b)}this.genres[b].items.push(a[c])}this.render=function(){var d=[];for(var e in this.genres){var f=this.genres[e].render();d.push(f)}$("div.genre").remove();$("div.tooltip").remove();$("#metrics div.wrapper").append(d)}}function Coll(b,a){this.views=b;this.user=a;this.id=null;this.items={};this.addItems=function(d){for(var c=0;c<d.length;c++){tiid=d[c]["_id"];this.items[tiid]=new Item(d[c],new ItemView($),$)}};this.update=function(){var c=this;this.views.startUpdating();$.ajax({url:"http://"+api_root+"/v1/collection/"+this.id+"?key="+api_key,type:"POST",success:function(d){console.log("updating.");c.get(1000)}})};this.get=function(c,e){if(e===undefined){var e=0}var d=this;this.views.startUpdating();$.ajax({url:"http://"+api_root+"/v1/collection/"+d.id+"?key="+api_key,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",statusCode:{210:function(f){console.log("still updating");d.addItems(f.items);d.views.render(d.items);if(e>120){d.render(f.items);console.log("failed to finish update; giving up after 1min.")}else{setTimeout(function(){d.get(c,e+1)},500)}},200:function(f){console.log("done with updating");d.addItems(f.items);d.views.render(d.items);d.views.finishUpdating(f.items);return false}}})}}function CollViews(){this.startUpdating=function(){$("img.loading").remove();$("h2").before(ajaxLoadImg)};this.badgesWeight=function(a){return _.reduce(a.awards,function(b,c){return b+(c.isHighly)?10:1},0)};this.finishUpdating=function(a){$("#page-header img").remove();$("#num-items span.value").text(a.length);$("ul.active li.item div.item-header").addClass("zoomable");$("span.item-expand-button").show().css({color:tiLinkColor}).fadeOut(1500,function(){$(this).removeAttr("style")})};this.render=function(c){var b=this;var a=[];for(tiid in c){a.push(c[tiid])}a.sort(function(f,e){return b.badgesWeight(e.dict)-b.badgesWeight(f.dict)});var d=new GenreList(a);d.render()}}function CollController(a,b){this.collReportPageInit=function(){a.id=reportId;a.get(1000)};$("#update-report-button").click(function(){a.update();return false});$("div#num-items a").toggle(function(){$(this).html("(collapse all)");$("li.item").addClass("zoomed").find("div.zoom").show()},function(){$(this).html("(expand all)");$("li.item").removeClass("zoomed").find("div.zoom").hide()})}$.ajaxSetup({cache:false});$.support.cors=true;if(!window.console){console={log:function(){}}}var tiLinkColor="#FF4E00";var ajaxLoadImg="<img class='loading' src='../static/img/ajax-loader.gif' alt='loading...' />";var ajaxLoadImgTransparent="<img class='loading' src='../static/img/ajax-loader-transparent.gif' alt='loading...' />";var collectionAliases=[];var currentUserInputValue="";var currentlyUpdating=false;exampleStrings={paste_input:"10.1038/171737a0\n13054692",paste_webpages:"http://www.example.com\nhttp://www.zombo.com",crossref_input:"Watson : A Structure for Deoxyribose Nucleic Acid",name:"My Collection"};inputExamplesIClickHandler=function(a){};flatten=function(e){var a=[];numIds=e.length;for(var c=0;c<numIds;c++){var f=e[c][1];var d=e[c][0];if(Object.prototype.toString.call(f)==="[object Array]"){var b=f.join(",")}else{var b=f}a.push([d,b])}return(a)};addCollectionIds=function(a,k,c,j){if(c===undefined){var c=$("<span class='items-added-msg'>items added</span>")}var h=collectionAliases.length;var l=flatten(a);var d={};for(var e=0;e<collectionAliases.length;e++){var b=collectionAliases[e].join(":");d[b]=1}console.log(d);for(var e=0;e<l.length;e++){var f=l[e].join(":");if(!d[f]){collectionAliases.push(l[e])}}$("div.progressbar").empty();$("span.loading").remove();var g=collectionAliases.length;numIdsAdded=g-h;$("#artcounter span.count").html(g);if(numIdsAdded||j){k.siblings("span.added").remove();$("<span class='added'><span class='count'>"+numIdsAdded+"</span></span>").append(c).insertAfter(k);k.siblings("span.added").find("span.count").css({color:"#ff4e00"}).animate({color:"#555555"},1500)}return true};parseTextareaArtifacts=function(f){var e=f.split("\n");var d=[];for(i=0;i<e.length;i++){var b=[];var a=e[i];if(a.indexOf(":")!=-1){b[0]=a.split(":")[0];b[1]=a.substr(b[0].length+1);if((b[0]=="http")||(b[0]=="https")){if(a.indexOf("http://dx.doi.org/")!=-1){b[0]="doi";b[1]=a.replace("http://dx.doi.org/","")}else{b[0]="url";b[1]=a}}}else{if(a.length>0){var c=/^[\d\.]+$/.test(a);if(a.substring(0,3)=="10."){b[0]="doi"}else{if(c&&(a.length>5)&&(a.length<=8)){b[0]="pmid"}else{b[0]="unknown"}}b[1]=a}}if(typeof b[1]!="undefined"){d.push(b)}}return d};progressbar=function(b,a,c){percentDone=Math.round(a/b*100);c.html(percentDone+"% done...")};bibtexUploadDone=function(c,a){var b=c-a.length;var d=$(ich.bibtexUploadDoneMsg({numFailedItems:b}));d.find("a.help-text").clickover();addCollectionIds(a,$("div.fileupload"),d,true)};update_bibtex_progress=function(a){$.ajax({url:"http://"+api_root+"/provider/bibtex/memberitems/"+a+"?method=async",type:"GET",dataType:"json",success:function(d,c,e){console.log("searched using query_hash "+a);console.log(d);if(d.pages==d.complete){b=[];for(i=0;i<d.memberitems.length;i++){var b=b.concat(d.memberitems[i])}bibtexUploadDone(d.number_entries,b)}else{progressbar(d.pages,d.complete,$("#bibtex_toggler_contents div.progressbar"));setTimeout(function(){update_bibtex_progress(a)},500)}},error:function(b,d,c){$("span.loading").remove();$("div.fileupload span.added").remove();$("div.fileupload").append("<span class='added'><span class='sorry'>sorry, there was an error.</span></span>")}})};upload_bibtex=function(c){var b=$("li #input_bibtex")[0];var a=b.files[0];var d=new FormData();d.append("file",a);$("span.btn-file").remove();$("<span class='loading'>"+ajaxLoadImg+"<span>").insertBefore("div.fileupload div.progressbar");console.log("starting ajax request now.");progressbar(1,0,$("#bibtex_toggler_contents div.progressbar"));$.ajax({url:"http://"+api_root+"/provider/bibtex/memberitems",type:"POST",processData:false,contentType:false,timeout:120*1000,data:d,dataType:"json",success:function(f,e,g){query_hash=f.query_hash;console.log("started update request; got this query_hash back: "+query_hash);update_bibtex_progress(query_hash)},error:function(e,g,f){$("span.loading").remove();$("div.fileupload span.added").remove();$("div.fileupload").append("<span class='added'><span class='sorry'>sorry, there was an error.</span></span>")}})};createCollectionInit=function(){$("#google-scholar-help-link").click(function(){$("#google-scholar-help").modal("show");return false});$("#orcid-help-link").click(function(){$("#orcid-help").modal("show");return false});$("#bibtex-fail-help a").click(function(){$(".modal").modal("hide");if($(this).hasClass("uservoice")){UserVoice.showPopupWidget()}});$("li textarea, input#name").each(function(){$(this).val(exampleStrings[this.id])});$("div.toggler_contents input, ul#manual-add textarea, input#name").focus(function(){currentUserInputValue=$(this).val();$(this).removeClass("no-input-yet");if(currentUserInputValue==exampleStrings[this.id]){$(this).val("")}}).blur(function(){$this=$(this);if($this.val()==""){$this.addClass("no-input-yet");$this.val(exampleStrings[this.id]);return false}else{if($this.val()==currentUserInputValue){return false}}if($this.hasClass("artifactList")){newIds=parseTextareaArtifacts($(this).val());newIds=newIds.slice(0,100);addCollectionIds(newIds,$(this))}else{if($this.attr("id")=="name"){}else{var d=$(this).attr("id").split("_");var c=d[0];if(c=="crossref"){var e="&type=import";var a=$this.val().replace(":","|");var b=escape(a)}else{var b=escape($this.val())}$(this).siblings("span.added").remove();$(this).not("input#name").after("<span class='loading'>"+ajaxLoadImg+"<span>");console.log("running memberitems");$.ajax({url:"http://"+api_root+"/provider/"+c+"/memberitems/"+b+"?method=sync",type:"GET",dataType:"json",success:function(g,f,h){addCollectionIds(g.memberitems,$this)},error:function(g,j,h){$("span.loading").remove();$this.siblings("span.added").remove();var f;if(g.status==404){f="sorry, not found. (ORCID imports are failing for new records, we're working to fix)"}else{f="sorry, there was an error."}$this.after("<span class='added'><span class='sorry'>"+f+"</span></span>")}})}}});$("#id-form").submit(function(){if(collectionAliases.length==0){alert("Looks like you haven't added any research objects to the collection yet.");return false}else{console.log("adding collection with new items.");$("#go-button").replaceWith("<span class='loading'>"+ajaxLoadImg+"<span>");var a={title:$("#name").val(),aliases:collectionAliases};$.ajax({url:"http://"+api_root+"/v1/collection?key="+api_key,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(a),success:function(c){returnedCollection=c.collection;user.addColl(returnedCollection._id,c.key);var b=$("#inline-register-email").val();var d=$("#inline-register-pw").val();if(b&&d){user.setCreds(b,d)}var e=function(){_gaq.push(["_trackPageview","/user/created"]);location.href="/collection/"+returnedCollection._id};if(user.hasCreds()){user.syncWithServer("push",{on200:e})}else{e()}}});return false}})};function homePageInit(){$(".carousel").carousel();$(".carousel").carousel("cycle")}function aboutPageInit(){if(location.href.indexOf("#contact")>0){$("#contact h3").css("color",tiLinkColor).siblings("p").css({backgroundColor:"#ff834c"}).animate({backgroundColor:"#ffffff"},1000)}}$(document).ready(function(){$.cookie.defaults={path:"/",raw:1};userViews=new UserViews();user=new User(userViews);userController=new UserController(user,userViews);userController.init();collViews=new CollViews();coll=new Coll(collViews);collController=new CollController(coll,collViews);itemController=new ItemController($);if(typeof reportIdNamespace=="undefined"){}else{if(reportIdNamespace=="impactstory_collection_id"){collController.collReportPageInit()}else{itemController.itemReportPageInit()}}if($("#toc")[0]){$("#toc").tocBuilder({type:"headings",startLevel:3,endLevel:3,insertBackLinks:0})}createCollectionInit();homePageInit();aboutPageInit();if(window.location.href.indexOf("#context")!=-1){$("#context").modal("show")}prettyPrint()});var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-23384030-1"]);_gaq.push(["_trackPageview"]);(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})();(function(l,c){if(!c.__SV){var d,k,h,j;window.mixpanel=c;d=l.createElement("script");d.type="text/javascript";d.async=!0;d.src=("https:"===l.location.protocol?"https:":"http:")+"//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";k=l.getElementsByTagName("script")[0];k.parentNode.insertBefore(d,k);c._i=[];c.init=function(b,m,n){function g(e,p){var f=p.split(".");2==f.length&&(e=e[f[0]],p=f[1]);e[p]=function(){e.push([p].concat(Array.prototype.slice.call(arguments,0)))}}var o=c;"undefined"!==typeof n?o=c[n]=[]:n="mixpanel";o.people=o.people||[];o.toString=function(e){var f="mixpanel";"mixpanel"!==n&&(f+="."+n);e||(f+=" (stub)");return f};o.people.toString=function(){return o.toString(1)+".people (stub)"};h="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.increment".split(" ");for(j=0;j<h.length;j++){g(o,h[j])}c._i.push([b,m,n])};c.__SV=1.2}})(document,window.mixpanel||[]);