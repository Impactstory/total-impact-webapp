<div class="product-page">

   <!--
   <div class="header profile-subpage-header product-page-header">
      <div class="wrapper">
         <a back-to-profile></a>
         <div class="product-page-controls" ng-show="userOwnsThisProfile && !loading.is()">
            <a class="edit-product"
               ng-click="editProduct()"
               tooltip="Make changes to this product's title or authors"
               tooltip-placement="bottom">
               <span class="ready">
                  <i class="icon-edit"></i>
                  Edit
               </span>
               <span class="working" ng-show="loading.is('deleteProduct')">
                  <i class="icon-refresh icon-spin"></i>
                  Removing...
               </span>
            </a>

            <a class="delete-product"
               ng-click="deleteProduct()"
               tooltip="Remove this product from your profile."
               tooltip-placement="bottom">
               <span class="ready">
                  <i class="icon-trash"></i>
                  Remove
               </span>
            </a>
         </div>
      </div>
   </div>
   -->

   <div class="content wrapper">
      <!--<div class="working" ng-show="loading.is('productPage')">
         <i class="icon-refresh icon-spin"></i>
         <span class="text">Loading product...</span>
      </div>-->

      <div id="biblio">
         <h2 class="title">
            <span class="title-text"
                  tooltip="click to edit"
                  tooltip-placement="left"
                  e-rows="3"
                  onaftersave="updateBiblio('title')"
                  ng-show="!loading.is('updateBiblio.title')"
                  editable-textarea="biblio.display_title">
               {{biblio.display_title || "click to enter title"}}
            </span>
            <span class="loading" ng-show="loading.is('updateBiblio.title')">
               <i class="icon-refresh icon-spin"></i>
               updating publication year...
            </span>
         </h2>

         <div class="optional-biblio">

            <!-- authors line -->
            <div class="biblio-line">
               <span class="biblio-field authors">
                  <span class="value"
                        tooltip="click to edit"
                        tooltip-placement="right"
                        onaftersave="updateBiblio('authors')"
                        ng-show="!loading.is('updateBiblio.authors')"
                        editable-text="biblio.authors">
                  {{ biblio.display_authors || "click to enter authors" }}
                  </span>
                  <span class="loading" ng-show="loading.is('updateBiblio.authors')">
                     <i class="icon-refresh icon-spin"></i>
                     updating authors...
                  </span>
               </span>

            </div>


            <!-- date and journal/repo line -->
            <div class="biblio-line date-and-source">
               <span class="biblio-field year">
                  <span class="value biblio-year"
                        tooltip="click to edit"
                        tooltip-placement="left"
                        ng-show="!loading.is('updateBiblio.year')"
                        onaftersave="updateBiblio('year')"
                        editable-text="biblio.year">
                     {{ biblio.display_year || "click to enter publication year" }}
                  </span>
                  <span class="loading" ng-show="loading.is('updateBiblio.year')">
                     <i class="icon-refresh icon-spin"></i>
                     updating publication year...
                  </span>
               </span>

               <span class="biblio-field repository">
                  <span class="value"
                     tooltip="click to edit"
                     tooltip-placement="right"
                     editable-text="biblio.repository"
                     onaftersave="updateBiblio('repository')"
                     ng-show="biblio.repository && !biblio.journal && !loading.is('updateBiblio.repository')">
                     {{ biblio.repository || 'click to enter repository' }}.
                  </span>
                  <span class="loading" ng-show="loading.is('updateBiblio.repository')">
                     <i class="icon-refresh icon-spin"></i>
                     updating repository...
                  </span>
               </span>

               <span class="biblio-field journal">
                  <span class="value"
                     tooltip="click to edit"
                     tooltip-placement="right"
                     editable-text="biblio.journal"
                     onaftersave="updateBiblio('journal')"
                     ng-show="biblio.journal && !loading.is('updateBiblio.journal')">
                     {{ biblio.journal || 'click to enter journal' }}
                  </span>
                  <span class="loading" ng-show="loading.is('updateBiblio.journal')">
                     <i class="icon-refresh icon-spin"></i>
                     updating journal...
                  </span>
               </span>

            </div>


            <!-- abstract line -->
            <div class="biblio-line abstract">
               <span class="biblio-field abstract">
                  <span class="biblio-field-label">Abstract:</span>

                  <span class="value"
                     tooltip="click to edit"
                     tooltip-placement="right"
                     ng-show="!loading.is('updateBiblio.abstract')"
                     editable-textarea="biblio.abstract"
                     onaftersave="updateBiblio('abstract')">
                     {{ truncatedAbstract() || 'click to enter abstract'}}
                  </span>

                  <span class="more-abstract"
                        ng-hide="loading.is('updateBiblio.abstract') || userWantsFullAbstract"
                        ng-click="userWantsFullAbstract=true">(more)</span>

                  <span class="loading" ng-show="loading.is('updateBiblio.abstract')">
                     <i class="icon-refresh icon-spin"></i>
                     updating abstract...
                  </span>
               </span>
            </div>


            <!-- keywords line -->
            <div class="biblio-line keywords">
               <span class="biblio-field keywords">
                  <span class="biblio-field-label">Keywords:</span>
                  <span class="value"
                     tooltip="click to edit"
                     tooltip-placement="right"
                     editable-text="biblio.keywords"
                     onaftersave="updateBiblio('keywords')"
                     ng-show="!loading.is('updateBiblio.keywords')">
                     {{ biblio.keywords || 'click to enter keywords (separate with semicolons)'}}
                  </span>
                  <span class="loading" ng-show="loading.is('updateBiblio.keywords')">
                     <i class="icon-refresh icon-spin"></i>
                     updating keywords...
                  </span>
               </span>
            </div>





         </div>

      </div>

      <div id="sidebar">
         <div class="download-button-container">
            <div class="btn btn-default" ng-click="downloadFile()">Download</div>
         </div>
         <div id="metrics">
            <div class="contents" ng-bind-html="metricsMarkup"></div>
         </div>
      </div>


      <div id="file">
         <div class="contents">

            <div class="file-input-container well" ng-controller="productUploadCtrl">
               <h4>upload your file</h4>
              <input type="file" ng-file-select="onFileSelect($files)">
            </div>

            <div class="file-wrapper">
               <div class="iframe-wrapper" dynamic="iframeToEmbed"></div>
            </div>
         </div>
      </div>







   </div>
</div>