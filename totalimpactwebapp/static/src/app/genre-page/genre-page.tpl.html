<div class="genre-page">
   <div class="loading" ng-show="!doneLoading">
      <div class="working"><i class="icon-refresh icon-spin"></i><span class="text">Loading profile info...</span></div>
   </div>
   <div class="content wrapper" ng-show="doneLoading">
      <div class="products">
         <ul class="products-list">
            <li class="product genre-{{ product.genre }}"
                ng-class="{first: $first}"
                ng-repeat="product in filteredProducts = (products | orderBy:['-awardedness_score', '-metric_raw_sum', 'biblio.title']) | filter: productFilter"
                id="{{ product.tiid }}"
                on-repeat-finished>


               <!-- users must be logged in -->
               <div class="product-margin" ng-show="security.isLogsgedIn(url_slug)">
                     <span class="single-product-controls">
                        <a class="remove-product"
                           tooltip="Delete this product"
                           ng-click="removeProduct(product)">
                           <i class="icon-trash icon"></i>
                        </a>
                     </span>
               </div>
               <div class="product-container" ng-bind-html="trustHtml(product.markup)"></div>
            </li>
         </ul>
      </div>
   </div>
</div>