<div class="genre-page">

   <pre>{{ foo }}</pre>

   <div class="loading" ng-show="isRendering()">
      <div class="working"><i class="icon-refresh icon-spin"></i><span class="text">Loading profile info...</span></div>
   </div>
   <div class="wrapper" ng-show="!isRendering()">
      <div class="header">
         <h2>
            <span class="return-to-profile-link-container">
               <a class="return-to-profile"
                  tooltip="return to {{ about.given_name }}'s profile"
                  href="/{{ about.url_slug }}">
                  <i class="icon-chevron-left"></i>
               </a>
            </span>
            <span class="text">
               {{ genreNamePlural }}
            </span>
         </h2>
      </div>
      <div class="products">
         <ul class="products-list">
            <li class="product genre-{{ product.genre }}"
                ng-class="{first: $first}"
                ng-repeat="product in filteredProducts = (products | orderBy:['-awardedness_score', '-metric_raw_sum', 'biblio.title']) | filter: productFilter"
                id="{{ product.tiid }}"
                on-repeat-finished>


               <!-- users must be logged in -->
               <div class="product-margin" ng-show="security.isLogsgedIn(url_slug)">
                     <span class="single-product-controls">
                        <a class="remove-product"
                           tooltip="Delete this product"
                           ng-click="removeProduct(product)">
                           <i class="icon-trash icon"></i>
                        </a>
                     </span>
               </div>
               <div class="product-container" ng-bind-html="trustHtml(product.markup)"></div>
            </li>
         </ul>
      </div>
   </div>
</div>