{% extends "base.html" %}
{% set page_title = "Preferences" %}

{# we only serve this page to logged-in users #}
{% set edit_status = "can-edit" %}

{% block content %}

<script type="text/javascript">
   var impactstoryProfileId = '{{ profile.id }}'  //also used elsewhere
</script>

<div class="main" id="report">
   <div class="wrapper">
      <div class="pref-category name">
         <h3>Name</h3>
         <div class='editable-name editable-container'>
            <span class="given-name editable" data-name="given_name">{{ profile.given_name }}</span>
            <span class="surname editable" data-name="surname">{{ profile.surname }}</span>
            <span class="instr">&nbsp;<span>click name to edit</span></span>
         </div>
      </div>
      <div class="pref-category profile-url">
         <h3>Profile URL</h3>
         <span class="url editable-container">
            <span class="url-component base">http://impactstory.org/</span>
            <span class="url-component slug editable">{{ profile.url_slug }}</span>
         </span>
      </div>
      <div class="pref-category email">
         <h3>Email</h3>
         <span class="email-container editable-container">
            <span class="email editable">{{ profile.email }}</span>
         </span>
      </div>
      <div class="pref-category change-pw">
         <h3>Change password</h3>
         <form class="form-horizontal" id="change-pw">
            <div class="control-group ready enter-current-pw">
               <label class="control-label" for="current-pw">Current</label>
               <div class="controls ">
                  <input type="password" name="current_pw" id="current-pw" placeholder="Current password">
                  <span class="help-inline failure error">Sorry, that's not your current password.</span>
               </div>
            </div>
            <div class="control-group ready enter-new-pw">
               <label class="control-label" for="new-pw">New</label>
               <div class="controls ">
                  <input type="password" name="new_pw" id="new-pw" placeholder="New password">
               </div>
            </div>
            <div class="control-group ready confirm-new-pw">
               <label class="control-label" for="confirm-new-pw">Confirm</label>
               <div class="controls">
                  <div class="input-append">
                     <input type="password" name="current_pw" id="confirm-new-pw" placeholder="Confirm new password">
                     <button class="btn submit ready" type="submit">Submit</button>
                     <span class="working"><img src="{{ url_for('static', filename='img/ajax-loader.gif') }}" /></span>
                     <span class="help-inline failure error">Whoops, looks like you mistyped your new password...</span>
                  </div>
                  <span class="pw-changed help-block">Password changed.</span>
               </div>
            </div>
         </form>
      </div>
   </div>
</div>

{% endblock %}
