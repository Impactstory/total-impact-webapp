from totalimpact import db, app
from totalimpact import provider_batch_data
from totalimpact.provider_batch_data import ProviderBatchData

from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from sqlalchemy.exc import OperationalError

import os, json, copy

from nose.tools import raises, assert_equals, nottest
import unittest
from test.utils import setup_postgres_for_unittests, teardown_postgres_for_unittests


class TestProviderBatchData():

    def setUp(self):
        self.db = setup_postgres_for_unittests(db, app)

        self.test_data = {
               "raw": "<pmc-web-stat><request year=\"2012\" month=\"10\" jrid=\"elife\" eissn=\"2050-084X\"></request><response status=\"0\" collection=\"eLife\"></response><articles><article id=\"PMC3463246\"><meta-data doi=\"10.7554/eLife.00013\" pmcid=\"PMC3463246\" pubmed-id=\"23066504\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00013\"/><usage unique-ip=\"1368\" full-text=\"1464\" pdf=\"722\" abstract=\"119\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"144\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3463247\"><meta-data doi=\"10.7554/eLife.00240\" pmcid=\"PMC3463247\" pubmed-id=\"23066507\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00240\"/><usage unique-ip=\"514\" full-text=\"606\" pdf=\"230\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"9\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3465569\"><meta-data doi=\"10.7554/eLife.00242\" pmcid=\"PMC3465569\" pubmed-id=\"23066508\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00242\"/><usage unique-ip=\"473\" full-text=\"503\" pdf=\"181\" abstract=\"2\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"13\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3465570\"><meta-data doi=\"10.7554/eLife.00243\" pmcid=\"PMC3465570\" pubmed-id=\"23066509\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00243\"/><usage unique-ip=\"547\" full-text=\"636\" pdf=\"227\" abstract=\"1\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"56\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3466591\"><meta-data doi=\"10.7554/eLife.00065\" pmcid=\"PMC3466591\" pubmed-id=\"23066506\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00065\"/><usage unique-ip=\"2516\" full-text=\"2804\" pdf=\"1583\" abstract=\"195\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"405\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3466783\"><meta-data doi=\"10.7554/eLife.00007\" pmcid=\"PMC3466783\" pubmed-id=\"23066503\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00007\"/><usage unique-ip=\"1331\" full-text=\"1412\" pdf=\"898\" abstract=\"224\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"109\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3467772\"><meta-data doi=\"10.7554/eLife.00270\" pmcid=\"PMC3467772\" pubmed-id=\"23066510\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00270\"/><usage unique-ip=\"1396\" full-text=\"1776\" pdf=\"625\" abstract=\"4\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3470722\"><meta-data doi=\"10.7554/eLife.00286\" pmcid=\"PMC3470722\" pubmed-id=\"23071903\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00286\"/><usage unique-ip=\"909\" full-text=\"1030\" pdf=\"376\" abstract=\"6\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3479833\"><meta-data doi=\"10.7554/eLife.00031\" pmcid=\"PMC3479833\" pubmed-id=\"23110253\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00031\"/><usage unique-ip=\"154\" full-text=\"126\" pdf=\"87\" abstract=\"26\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"13\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3470409\"><meta-data doi=\"10.7554/eLife.00048\" pmcid=\"PMC3470409\" pubmed-id=\"23066505\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00048\"/><usage unique-ip=\"1250\" full-text=\"1361\" pdf=\"911\" abstract=\"237\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"317\" supp-data=\"4\" cited-by=\"0\"/></article><article id=\"PMC3482692\"><meta-data doi=\"10.7554/eLife.00102\" pmcid=\"PMC3482692\" pubmed-id=\"23110254\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00102\"/><usage unique-ip=\"259\" full-text=\"232\" pdf=\"133\" abstract=\"36\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"8\" supp-data=\"3\" cited-by=\"0\"/></article><article id=\"PMC3482687\"><meta-data doi=\"10.7554/eLife.00281\" pmcid=\"PMC3482687\" pubmed-id=\"23110255\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00281\"/><usage unique-ip=\"75\" full-text=\"53\" pdf=\"47\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"1\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3482686\"><meta-data doi=\"10.7554/eLife.00005\" pmcid=\"PMC3482686\" pubmed-id=\"23110252\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00005\"/><usage unique-ip=\"324\" full-text=\"249\" pdf=\"263\" abstract=\"71\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"93\" supp-data=\"17\" cited-by=\"0\"/></article></articles></pmc-web-stat>",
               "max_event_date": "2012-10-31T07:34:01.126892",
               "provider": "pmc",
               "aliases": {
                   "pmid": [
                       "23066504",
                       "23066507",
                       "23066508",
                       "23066509",
                       "23066506",
                       "23066503",
                       "23066510",
                       "23071903",
                       "23110253",
                       "23066505",
                       "23110254",
                       "23110255",
                       "23110252"
                   ]
               },
               "provider_raw_version": 1,
               "min_event_date": "2012-10-01T07:34:01.126892",
               "created": "2012-11-29T07:34:01.126892"
            }    

        self.old_doc = {
                   "_id": "pmc201304",
                   "_rev": "1-c9a62778077941736932cfb3510ee382",
                   "raw": "<pmc-web-stat><request year=\"2013\" month=\"04\" jrid=\"elife\" eissn=\"2050-084X\"></request><response status=\"0\" collection=\"eLife\"></response><articles><article id=\"PMC3463246\"><meta-data doi=\"10.7554/eLife.00013\" pmcid=\"PMC3463246\" pubmed-id=\"23066504\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00013\"/><usage unique-ip=\"112\" full-text=\"152\" pdf=\"22\" abstract=\"1\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"31\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3463247\"><meta-data doi=\"10.7554/eLife.00240\" pmcid=\"PMC3463247\" pubmed-id=\"23066507\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00240\"/><usage unique-ip=\"10\" full-text=\"41\" pdf=\"1\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3465569\"><meta-data doi=\"10.7554/eLife.00242\" pmcid=\"PMC3465569\" pubmed-id=\"23066508\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00242\"/><usage unique-ip=\"27\" full-text=\"26\" pdf=\"3\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3465570\"><meta-data doi=\"10.7554/eLife.00243\" pmcid=\"PMC3465570\" pubmed-id=\"23066509\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00243\"/><usage unique-ip=\"41\" full-text=\"50\" pdf=\"9\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"8\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3466591\"><meta-data doi=\"10.7554/eLife.00065\" pmcid=\"PMC3466591\" pubmed-id=\"23066506\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00065\"/><usage unique-ip=\"252\" full-text=\"2522\" pdf=\"41\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"72\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3466783\"><meta-data doi=\"10.7554/eLife.00007\" pmcid=\"PMC3466783\" pubmed-id=\"23066503\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00007\"/><usage unique-ip=\"47\" full-text=\"62\" pdf=\"5\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"10\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3467772\"><meta-data doi=\"10.7554/eLife.00270\" pmcid=\"PMC3467772\" pubmed-id=\"23066510\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00270\"/><usage unique-ip=\"28\" full-text=\"32\" pdf=\"2\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3470409\"><meta-data doi=\"10.7554/eLife.00048\" pmcid=\"PMC3470409\" pubmed-id=\"23066505\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00048\"/><usage unique-ip=\"72\" full-text=\"68\" pdf=\"20\" abstract=\"1\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"26\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3470722\"><meta-data doi=\"10.7554/eLife.00286\" pmcid=\"PMC3470722\" pubmed-id=\"23071903\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00286\"/><usage unique-ip=\"37\" full-text=\"40\" pdf=\"7\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3479833\"><meta-data doi=\"10.7554/eLife.00031\" pmcid=\"PMC3479833\" pubmed-id=\"23110253\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00031\"/><usage unique-ip=\"31\" full-text=\"41\" pdf=\"3\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"7\" supp-data=\"0\" cited-by=\"1\"/></article><article id=\"PMC3482686\"><meta-data doi=\"10.7554/eLife.00005\" pmcid=\"PMC3482686\" pubmed-id=\"23110252\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00005\"/><usage unique-ip=\"189\" full-text=\"238\" pdf=\"33\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"110\" supp-data=\"2\" cited-by=\"0\"/></article><article id=\"PMC3482687\"><meta-data doi=\"10.7554/eLife.00281\" pmcid=\"PMC3482687\" pubmed-id=\"23110255\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00281\"/><usage unique-ip=\"17\" full-text=\"20\" pdf=\"0\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3482692\"><meta-data doi=\"10.7554/eLife.00102\" pmcid=\"PMC3482692\" pubmed-id=\"23110254\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00102\"/><usage unique-ip=\"50\" full-text=\"55\" pdf=\"11\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"7\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3485613\"><meta-data doi=\"10.7554/eLife.00301\" pmcid=\"PMC3485613\" pubmed-id=\"23150799\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00301\"/><usage unique-ip=\"41\" full-text=\"43\" pdf=\"7\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"7\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3485615\"><meta-data doi=\"10.7554/eLife.00049\" pmcid=\"PMC3485615\" pubmed-id=\"23150796\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00049\"/><usage unique-ip=\"390\" full-text=\"558\" pdf=\"108\" abstract=\"11\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"132\" supp-data=\"0\" cited-by=\"4\"/></article><article id=\"PMC3490148\"><meta-data doi=\"10.7554/eLife.00302\" pmcid=\"PMC3490148\" pubmed-id=\"23150800\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00302\"/><usage unique-ip=\"47\" full-text=\"54\" pdf=\"4\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"8\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3490149\"><meta-data doi=\"10.7554/eLife.00068\" pmcid=\"PMC3490149\" pubmed-id=\"23150797\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00068\"/><usage unique-ip=\"42\" full-text=\"53\" pdf=\"12\" abstract=\"1\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"9\" supp-data=\"1\" cited-by=\"0\"/></article><article id=\"PMC3491588\"><meta-data doi=\"10.7554/eLife.00003\" pmcid=\"PMC3491588\" pubmed-id=\"23150794\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00003\"/><usage unique-ip=\"62\" full-text=\"58\" pdf=\"20\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"13\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3492862\"><meta-data doi=\"10.7554/eLife.00011\" pmcid=\"PMC3492862\" pubmed-id=\"23150795\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00011\"/><usage unique-ip=\"68\" full-text=\"70\" pdf=\"9\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"18\" supp-data=\"6\" cited-by=\"0\"/></article><article id=\"PMC3494066\"><meta-data doi=\"10.7554/eLife.00173\" pmcid=\"PMC3494066\" pubmed-id=\"23150798\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00173\"/><usage unique-ip=\"39\" full-text=\"47\" pdf=\"3\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"12\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510452\"><meta-data doi=\"10.7554/eLife.00051\" pmcid=\"PMC3510452\" pubmed-id=\"23240081\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00051\"/><usage unique-ip=\"16\" full-text=\"16\" pdf=\"5\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510453\"><meta-data doi=\"10.7554/eLife.00078\" pmcid=\"PMC3510453\" pubmed-id=\"23240084\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00078\"/><usage unique-ip=\"33\" full-text=\"33\" pdf=\"8\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"1\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510454\"><meta-data doi=\"10.7554/eLife.00171\" pmcid=\"PMC3510454\" pubmed-id=\"23240086\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00171\"/><usage unique-ip=\"28\" full-text=\"34\" pdf=\"4\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"14\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510455\"><meta-data doi=\"10.7554/eLife.00067\" pmcid=\"PMC3510455\" pubmed-id=\"23240082\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00067\"/><usage unique-ip=\"31\" full-text=\"34\" pdf=\"7\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"10\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510456\"><meta-data doi=\"10.7554/eLife.00070\" pmcid=\"PMC3510456\" pubmed-id=\"23240083\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00070\"/><usage unique-ip=\"37\" full-text=\"34\" pdf=\"4\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"20\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510471\"><meta-data doi=\"10.7554/eLife.00365\" pmcid=\"PMC3510471\" pubmed-id=\"23240092\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00365\"/><usage unique-ip=\"13\" full-text=\"14\" pdf=\"1\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510472\"><meta-data doi=\"10.7554/eLife.00340\" pmcid=\"PMC3510472\" pubmed-id=\"23240089\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00340\"/><usage unique-ip=\"8\" full-text=\"10\" pdf=\"0\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510473\"><meta-data doi=\"10.7554/eLife.00351\" pmcid=\"PMC3510473\" pubmed-id=\"0\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00351\"/><usage unique-ip=\"8\" full-text=\"9\" pdf=\"1\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510474\"><meta-data doi=\"10.7554/eLife.00184\" pmcid=\"PMC3510474\" pubmed-id=\"23240087\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00184\"/><usage unique-ip=\"38\" full-text=\"41\" pdf=\"8\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"4\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510475\"><meta-data doi=\"10.7554/eLife.00347\" pmcid=\"PMC3510475\" pubmed-id=\"23240090\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00347\"/><usage unique-ip=\"17\" full-text=\"18\" pdf=\"2\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"2\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510476\"><meta-data doi=\"10.7554/eLife.00353\" pmcid=\"PMC3510476\" pubmed-id=\"23240091\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00353\"/><usage unique-ip=\"22\" full-text=\"36\" pdf=\"4\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"4\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3510477\"><meta-data doi=\"10.7554/eLife.00326\" pmcid=\"PMC3510477\" pubmed-id=\"23240088\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00326\"/><usage unique-ip=\"14\" full-text=\"10\" pdf=\"2\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"6\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3514886\"><meta-data doi=\"10.7554/eLife.00109\" pmcid=\"PMC3514886\" pubmed-id=\"23240085\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00109\"/><usage unique-ip=\"34\" full-text=\"31\" pdf=\"11\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"15\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3524649\"><meta-data doi=\"10.7554/eLife.00090\" pmcid=\"PMC3524649\" pubmed-id=\"23256041\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00090\"/><usage unique-ip=\"34\" full-text=\"37\" pdf=\"6\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"9\" supp-data=\"0\" cited-by=\"1\"/></article><article id=\"PMC3524793\"><meta-data doi=\"10.7554/eLife.00352\" pmcid=\"PMC3524793\" pubmed-id=\"23256044\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00352\"/><usage unique-ip=\"15\" full-text=\"18\" pdf=\"0\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"2\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3524794\"><meta-data doi=\"10.7554/eLife.00093\" pmcid=\"PMC3524794\" pubmed-id=\"23251784\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00093\"/><usage unique-ip=\"19\" full-text=\"26\" pdf=\"1\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"1\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3524795\"><meta-data doi=\"10.7554/eLife.00311\" pmcid=\"PMC3524795\" pubmed-id=\"23251785\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00311\"/><usage unique-ip=\"33\" full-text=\"38\" pdf=\"11\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"9\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3524796\"><meta-data doi=\"10.7554/eLife.00181\" pmcid=\"PMC3524796\" pubmed-id=\"23256042\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00181\"/><usage unique-ip=\"25\" full-text=\"24\" pdf=\"2\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"12\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3524800\"><meta-data doi=\"10.7554/eLife.00386\" pmcid=\"PMC3524800\" pubmed-id=\"23256046\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00386\"/><usage unique-ip=\"15\" full-text=\"17\" pdf=\"2\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"4\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3524801\"><meta-data doi=\"10.7554/eLife.00047\" pmcid=\"PMC3524801\" pubmed-id=\"23251783\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00047\"/><usage unique-ip=\"47\" full-text=\"51\" pdf=\"16\" abstract=\"1\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"18\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3524826\"><meta-data doi=\"10.7554/eLife.00387\" pmcid=\"PMC3524826\" pubmed-id=\"23256047\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00387\"/><usage unique-ip=\"52\" full-text=\"60\" pdf=\"6\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"12\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3524827\"><meta-data doi=\"10.7554/eLife.00385\" pmcid=\"PMC3524827\" pubmed-id=\"23256045\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00385\"/><usage unique-ip=\"13\" full-text=\"16\" pdf=\"2\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"2\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3524939\"><meta-data doi=\"10.7554/eLife.00205\" pmcid=\"PMC3524939\" pubmed-id=\"23256043\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00205\"/><usage unique-ip=\"63\" full-text=\"75\" pdf=\"19\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"38\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3525924\"><meta-data doi=\"10.7554/eLife.00117\" pmcid=\"PMC3525924\" pubmed-id=\"23275833\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00117\"/><usage unique-ip=\"44\" full-text=\"46\" pdf=\"5\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"22\" supp-data=\"1\" cited-by=\"0\"/></article><article id=\"PMC3533262\"><meta-data doi=\"10.7554/eLife.00475\" pmcid=\"PMC3533262\" pubmed-id=\"23326638\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00475\"/><usage unique-ip=\"17\" full-text=\"19\" pdf=\"1\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3534202\"><meta-data doi=\"10.7554/eLife.00248\" pmcid=\"PMC3534202\" pubmed-id=\"23330067\" pub-year=\"2012\" volume=\"1\" issue=\"\" first-page=\"e00248\"/><usage unique-ip=\"34\" full-text=\"40\" pdf=\"9\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"12\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3539330\"><meta-data doi=\"10.7554/eLife.00450\" pmcid=\"PMC3539330\" pubmed-id=\"23326643\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00450\"/><usage unique-ip=\"19\" full-text=\"20\" pdf=\"1\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"1\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3539331\"><meta-data doi=\"10.7554/eLife.00452\" pmcid=\"PMC3539331\" pubmed-id=\"0\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00452\"/><usage unique-ip=\"11\" full-text=\"14\" pdf=\"0\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"1\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3539332\"><meta-data doi=\"10.7554/eLife.00160\" pmcid=\"PMC3539332\" pubmed-id=\"23326640\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00160\"/><usage unique-ip=\"45\" full-text=\"46\" pdf=\"11\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"17\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3539393\"><meta-data doi=\"10.7554/eLife.00170\" pmcid=\"PMC3539393\" pubmed-id=\"23326641\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00170\"/><usage unique-ip=\"67\" full-text=\"80\" pdf=\"12\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"36\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3545443\"><meta-data doi=\"10.7554/eLife.00231\" pmcid=\"PMC3545443\" pubmed-id=\"23326642\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00231\"/><usage unique-ip=\"43\" full-text=\"50\" pdf=\"8\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"22\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3545444\"><meta-data doi=\"10.7554/eLife.00116\" pmcid=\"PMC3545444\" pubmed-id=\"23326639\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00116\"/><usage unique-ip=\"68\" full-text=\"85\" pdf=\"14\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"16\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3552422\"><meta-data doi=\"10.7554/eLife.00012\" pmcid=\"PMC3552422\" pubmed-id=\"23359858\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00012\"/><usage unique-ip=\"48\" full-text=\"44\" pdf=\"14\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"8\" supp-data=\"0\" cited-by=\"1\"/></article><article id=\"PMC3552423\"><meta-data doi=\"10.7554/eLife.00308\" pmcid=\"PMC3552423\" pubmed-id=\"23358411\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00308\"/><usage unique-ip=\"71\" full-text=\"95\" pdf=\"17\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"23\" supp-data=\"3\" cited-by=\"0\"/></article><article id=\"PMC3552424\"><meta-data doi=\"10.7554/eLife.00178\" pmcid=\"PMC3552424\" pubmed-id=\"23359859\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00178\"/><usage unique-ip=\"64\" full-text=\"80\" pdf=\"16\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"51\" supp-data=\"11\" cited-by=\"1\"/></article><article id=\"PMC3552425\"><meta-data doi=\"10.7554/eLife.00476\" pmcid=\"PMC3552425\" pubmed-id=\"23358458\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00476\"/><usage unique-ip=\"24\" full-text=\"25\" pdf=\"1\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"2\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3552426\"><meta-data doi=\"10.7554/eLife.00477\" pmcid=\"PMC3552426\" pubmed-id=\"23359861\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00477\"/><usage unique-ip=\"22\" full-text=\"26\" pdf=\"2\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"8\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3552427\"><meta-data doi=\"10.7554/eLife.00491\" pmcid=\"PMC3552427\" pubmed-id=\"23359862\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00491\"/><usage unique-ip=\"28\" full-text=\"32\" pdf=\"5\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"1\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3552618\"><meta-data doi=\"10.7554/eLife.00183\" pmcid=\"PMC3552618\" pubmed-id=\"23358702\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00183\"/><usage unique-ip=\"34\" full-text=\"39\" pdf=\"4\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"4\" supp-data=\"73\" cited-by=\"0\"/></article><article id=\"PMC3552619\"><meta-data doi=\"10.7554/eLife.00230\" pmcid=\"PMC3552619\" pubmed-id=\"23359860\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00230\"/><usage unique-ip=\"34\" full-text=\"36\" pdf=\"4\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"2\" supp-data=\"14\" cited-by=\"0\"/></article><article id=\"PMC3557904\"><meta-data doi=\"10.7554/eLife.00563\" pmcid=\"PMC3557904\" pubmed-id=\"23386979\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00563\"/><usage unique-ip=\"51\" full-text=\"60\" pdf=\"19\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"10\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3557905\"><meta-data doi=\"10.7554/eLife.00471\" pmcid=\"PMC3557905\" pubmed-id=\"23386978\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00471\"/><usage unique-ip=\"267\" full-text=\"265\" pdf=\"107\" abstract=\"3\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"111\" supp-data=\"13\" cited-by=\"2\"/></article><article id=\"PMC3564445\"><meta-data doi=\"10.7554/eLife.00515\" pmcid=\"PMC3564445\" pubmed-id=\"23390590\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00515\"/><usage unique-ip=\"22\" full-text=\"25\" pdf=\"0\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"4\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3564446\"><meta-data doi=\"10.7554/eLife.00306\" pmcid=\"PMC3564446\" pubmed-id=\"23390587\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00306\"/><usage unique-ip=\"41\" full-text=\"52\" pdf=\"13\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"11\" supp-data=\"1\" cited-by=\"0\"/></article><article id=\"PMC3564447\"><meta-data doi=\"10.7554/eLife.00329\" pmcid=\"PMC3564447\" pubmed-id=\"23390589\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00329\"/><usage unique-ip=\"57\" full-text=\"83\" pdf=\"13\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"24\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3564448\"><meta-data doi=\"10.7554/eLife.00321\" pmcid=\"PMC3564448\" pubmed-id=\"23390588\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00321\"/><usage unique-ip=\"16\" full-text=\"19\" pdf=\"2\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"1\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3564474\"><meta-data doi=\"10.7554/eLife.00105\" pmcid=\"PMC3564474\" pubmed-id=\"23390586\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00105\"/><usage unique-ip=\"31\" full-text=\"34\" pdf=\"4\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"8\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3569938\"><meta-data doi=\"10.7554/eLife.00565\" pmcid=\"PMC3569938\" pubmed-id=\"23408481\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00565\"/><usage unique-ip=\"12\" full-text=\"14\" pdf=\"0\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3576708\"><meta-data doi=\"10.7554/eLife.00573\" pmcid=\"PMC3576708\" pubmed-id=\"23426864\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00573\"/><usage unique-ip=\"31\" full-text=\"33\" pdf=\"8\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"6\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3576709\"><meta-data doi=\"10.7554/eLife.00571\" pmcid=\"PMC3576709\" pubmed-id=\"23426887\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00571\"/><usage unique-ip=\"21\" full-text=\"23\" pdf=\"2\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"2\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3576710\"><meta-data doi=\"10.7554/eLife.00572\" pmcid=\"PMC3576710\" pubmed-id=\"23426937\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00572\"/><usage unique-ip=\"39\" full-text=\"35\" pdf=\"11\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"12\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3576711\"><meta-data doi=\"10.7554/eLife.00291\" pmcid=\"PMC3576711\" pubmed-id=\"23426999\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00291\"/><usage unique-ip=\"112\" full-text=\"133\" pdf=\"50\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"60\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3576727\"><meta-data doi=\"10.7554/eLife.00461\" pmcid=\"PMC3576727\" pubmed-id=\"23427024\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00461\"/><usage unique-ip=\"76\" full-text=\"79\" pdf=\"19\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"43\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3576809\"><meta-data doi=\"10.7554/eLife.00290\" pmcid=\"PMC3576809\" pubmed-id=\"23425906\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00290\"/><usage unique-ip=\"46\" full-text=\"58\" pdf=\"4\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"27\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3578201\"><meta-data doi=\"10.7554/eLife.00333\" pmcid=\"PMC3578201\" pubmed-id=\"23550179\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00333\"/><usage unique-ip=\"78\" full-text=\"100\" pdf=\"22\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"39\" supp-data=\"1\" cited-by=\"0\"/></article><article id=\"PMC3579228\"><meta-data doi=\"10.7554/eLife.00488\" pmcid=\"PMC3579228\" pubmed-id=\"0\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00488\"/><usage unique-ip=\"12\" full-text=\"15\" pdf=\"0\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3582987\"><meta-data doi=\"10.7554/eLife.00593\" pmcid=\"PMC3582987\" pubmed-id=\"23467495\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00593\"/><usage unique-ip=\"26\" full-text=\"29\" pdf=\"7\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3582988\"><meta-data doi=\"10.7554/eLife.00400\" pmcid=\"PMC3582988\" pubmed-id=\"23467508\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00400\"/><usage unique-ip=\"53\" full-text=\"55\" pdf=\"14\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"23\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3583005\"><meta-data doi=\"10.7554/eLife.00348\" pmcid=\"PMC3583005\" pubmed-id=\"23467541\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00348\"/><usage unique-ip=\"96\" full-text=\"105\" pdf=\"22\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"27\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3589823\"><meta-data doi=\"10.7554/eLife.00615\" pmcid=\"PMC3589823\" pubmed-id=\"23470921\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00615\"/><usage unique-ip=\"22\" full-text=\"26\" pdf=\"2\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3589824\"><meta-data doi=\"10.7554/eLife.00337\" pmcid=\"PMC3589824\" pubmed-id=\"23471010\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00337\"/><usage unique-ip=\"46\" full-text=\"46\" pdf=\"11\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"5\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3589825\"><meta-data doi=\"10.7554/eLife.00327\" pmcid=\"PMC3589825\" pubmed-id=\"23471103\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00327\"/><usage unique-ip=\"59\" full-text=\"61\" pdf=\"15\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"25\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3591006\"><meta-data doi=\"10.7554/eLife.00133\" pmcid=\"PMC3591006\" pubmed-id=\"23482306\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00133\"/><usage unique-ip=\"68\" full-text=\"72\" pdf=\"22\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"32\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3591093\"><meta-data doi=\"10.7554/eLife.00218\" pmcid=\"PMC3591093\" pubmed-id=\"23483797\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00218\"/><usage unique-ip=\"48\" full-text=\"46\" pdf=\"11\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"23\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3591783\"><meta-data doi=\"10.7554/eLife.00190\" pmcid=\"PMC3591783\" pubmed-id=\"23482940\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00190\"/><usage unique-ip=\"42\" full-text=\"43\" pdf=\"8\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"8\" supp-data=\"2\" cited-by=\"0\"/></article><article id=\"PMC3592195\"><meta-data doi=\"10.7554/eLife.00577\" pmcid=\"PMC3592195\" pubmed-id=\"23538671\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00577\"/><usage unique-ip=\"46\" full-text=\"47\" pdf=\"7\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"10\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3594797\"><meta-data doi=\"10.7554/eLife.00646\" pmcid=\"PMC3594797\" pubmed-id=\"23538735\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00646\"/><usage unique-ip=\"18\" full-text=\"21\" pdf=\"0\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3601633\"><meta-data doi=\"10.7554/eLife.00638\" pmcid=\"PMC3601633\" pubmed-id=\"23538852\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00638\"/><usage unique-ip=\"39\" full-text=\"41\" pdf=\"7\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"19\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3601634\"><meta-data doi=\"10.7554/eLife.00641\" pmcid=\"PMC3601634\" pubmed-id=\"23539117\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00641\"/><usage unique-ip=\"62\" full-text=\"65\" pdf=\"14\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"16\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3601810\"><meta-data doi=\"10.7554/eLife.00336\" pmcid=\"PMC3601810\" pubmed-id=\"23539289\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00336\"/><usage unique-ip=\"98\" full-text=\"108\" pdf=\"24\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"56\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3601818\"><meta-data doi=\"10.7554/eLife.00378\" pmcid=\"PMC3601818\" pubmed-id=\"23539368\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00378\"/><usage unique-ip=\"78\" full-text=\"89\" pdf=\"21\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"18\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3601819\"><meta-data doi=\"10.7554/eLife.00354\" pmcid=\"PMC3601819\" pubmed-id=\"23539454\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00354\"/><usage unique-ip=\"103\" full-text=\"140\" pdf=\"27\" abstract=\"1\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"36\" supp-data=\"4\" cited-by=\"0\"/></article><article id=\"PMC3602953\"><meta-data doi=\"10.7554/eLife.00605\" pmcid=\"PMC3602953\" pubmed-id=\"23538878\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00605\"/><usage unique-ip=\"65\" full-text=\"76\" pdf=\"17\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"18\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3602954\"><meta-data doi=\"10.7554/eLife.00312\" pmcid=\"PMC3602954\" pubmed-id=\"23538967\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00312\"/><usage unique-ip=\"158\" full-text=\"165\" pdf=\"58\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"70\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3608243\"><meta-data doi=\"10.7554/eLife.00648\" pmcid=\"PMC3608243\" pubmed-id=\"23539513\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00648\"/><usage unique-ip=\"71\" full-text=\"69\" pdf=\"16\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"20\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3608244\"><meta-data doi=\"10.7554/eLife.00642\" pmcid=\"PMC3608244\" pubmed-id=\"23539544\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00642\"/><usage unique-ip=\"40\" full-text=\"49\" pdf=\"7\" abstract=\"1\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"0\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3608245\"><meta-data doi=\"10.7554/eLife.00625\" pmcid=\"PMC3608245\" pubmed-id=\"23539644\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00625\"/><usage unique-ip=\"46\" full-text=\"51\" pdf=\"16\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"7\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3608266\"><meta-data doi=\"10.7554/eLife.00260\" pmcid=\"PMC3608266\" pubmed-id=\"23538384\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00260\"/><usage unique-ip=\"103\" full-text=\"122\" pdf=\"45\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"39\" supp-data=\"6\" cited-by=\"0\"/></article><article id=\"PMC3610343\"><meta-data doi=\"10.7554/eLife.00269\" pmcid=\"PMC3610343\" pubmed-id=\"23543845\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00269\"/><usage unique-ip=\"57\" full-text=\"63\" pdf=\"10\" abstract=\"1\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"9\" supp-data=\"2\" cited-by=\"0\"/></article><article id=\"PMC3614016\"><meta-data doi=\"10.7554/eLife.00278\" pmcid=\"PMC3614016\" pubmed-id=\"23577232\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00278\"/><usage unique-ip=\"39\" full-text=\"42\" pdf=\"7\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"16\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3614024\"><meta-data doi=\"10.7554/eLife.00655\" pmcid=\"PMC3614024\" pubmed-id=\"23577236\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00655\"/><usage unique-ip=\"27\" full-text=\"31\" pdf=\"5\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"2\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3614025\"><meta-data doi=\"10.7554/eLife.00435\" pmcid=\"PMC3614025\" pubmed-id=\"23577234\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00435\"/><usage unique-ip=\"100\" full-text=\"104\" pdf=\"32\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"62\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3614033\"><meta-data doi=\"10.7554/eLife.00367\" pmcid=\"PMC3614033\" pubmed-id=\"23577233\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00367\"/><usage unique-ip=\"49\" full-text=\"64\" pdf=\"15\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"9\" supp-data=\"8\" cited-by=\"0\"/></article><article id=\"PMC3614058\"><meta-data doi=\"10.7554/eLife.00639\" pmcid=\"PMC3614058\" pubmed-id=\"23577235\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00639\"/><usage unique-ip=\"46\" full-text=\"64\" pdf=\"8\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"2\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3622176\"><meta-data doi=\"10.7554/eLife.00692\" pmcid=\"PMC3622176\" pubmed-id=\"23580166\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00692\"/><usage unique-ip=\"27\" full-text=\"33\" pdf=\"5\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"5\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3622177\"><meta-data doi=\"10.7554/eLife.00444\" pmcid=\"PMC3622177\" pubmed-id=\"23580231\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00444\"/><usage unique-ip=\"60\" full-text=\"69\" pdf=\"22\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"26\" supp-data=\"4\" cited-by=\"0\"/></article><article id=\"PMC3622178\"><meta-data doi=\"10.7554/eLife.00426\" pmcid=\"PMC3622178\" pubmed-id=\"23580255\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00426\"/><usage unique-ip=\"63\" full-text=\"88\" pdf=\"18\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"29\" supp-data=\"5\" cited-by=\"0\"/></article><article id=\"PMC3622181\"><meta-data doi=\"10.7554/eLife.00499\" pmcid=\"PMC3622181\" pubmed-id=\"23580326\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00499\"/><usage unique-ip=\"80\" full-text=\"111\" pdf=\"37\" abstract=\"1\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"22\" supp-data=\"0\" cited-by=\"1\"/></article><article id=\"PMC3622228\"><meta-data doi=\"10.7554/eLife.00659\" pmcid=\"PMC3622228\" pubmed-id=\"23580350\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00659\"/><usage unique-ip=\"37\" full-text=\"37\" pdf=\"10\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"11\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3622229\"><meta-data doi=\"10.7554/eLife.00663\" pmcid=\"PMC3622229\" pubmed-id=\"23580362\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00663\"/><usage unique-ip=\"46\" full-text=\"51\" pdf=\"15\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"11\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3628084\"><meta-data doi=\"10.7554/eLife.00415\" pmcid=\"PMC3628084\" pubmed-id=\"23599892\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00415\"/><usage unique-ip=\"40\" full-text=\"40\" pdf=\"10\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"14\" supp-data=\"0\" cited-by=\"1\"/></article><article id=\"PMC3628085\"><meta-data doi=\"10.7554/eLife.00458\" pmcid=\"PMC3628085\" pubmed-id=\"23599893\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00458\"/><usage unique-ip=\"120\" full-text=\"124\" pdf=\"36\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"43\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3628086\"><meta-data doi=\"10.7554/eLife.00362\" pmcid=\"PMC3628086\" pubmed-id=\"23599891\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00362\"/><usage unique-ip=\"91\" full-text=\"120\" pdf=\"24\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"64\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3628087\"><meta-data doi=\"10.7554/eLife.00534\" pmcid=\"PMC3628087\" pubmed-id=\"23599896\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00534\"/><usage unique-ip=\"72\" full-text=\"72\" pdf=\"16\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"19\" supp-data=\"1\" cited-by=\"0\"/></article><article id=\"PMC3628110\"><meta-data doi=\"10.7554/eLife.00482\" pmcid=\"PMC3628110\" pubmed-id=\"23599895\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00482\"/><usage unique-ip=\"44\" full-text=\"51\" pdf=\"1\" abstract=\"1\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"21\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3628404\"><meta-data doi=\"10.7554/eLife.00729\" pmcid=\"PMC3628404\" pubmed-id=\"23599898\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00729\"/><usage unique-ip=\"62\" full-text=\"100\" pdf=\"12\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"8\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3628405\"><meta-data doi=\"10.7554/eLife.00459\" pmcid=\"PMC3628405\" pubmed-id=\"23599894\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00459\"/><usage unique-ip=\"39\" full-text=\"42\" pdf=\"9\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"45\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3628440\"><meta-data doi=\"10.7554/eLife.00676\" pmcid=\"PMC3628440\" pubmed-id=\"23599897\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00676\"/><usage unique-ip=\"18\" full-text=\"23\" pdf=\"3\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"2\" supp-data=\"0\" cited-by=\"0\"/></article><article id=\"PMC3629793\"><meta-data doi=\"10.7554/eLife.00288\" pmcid=\"PMC3629793\" pubmed-id=\"23606943\" pub-year=\"2013\" volume=\"2\" issue=\"\" first-page=\"e00288\"/><usage unique-ip=\"35\" full-text=\"41\" pdf=\"4\" abstract=\"0\" scanned-summary=\"0\" scanned-page-browse=\"0\" figure=\"11\" supp-data=\"3\" cited-by=\"0\"/></article></articles></pmc-web-stat>",
                   "provider_raw_version": 1,
                   "max_event_date": "2013-04-30T23:59:59.999999",
                   "provider": "pmc",
                   "aliases": {
                       "pmid": [
                           "23066504",
                           "23066507",
                           "23066508",
                           "23066509",
                           "23066506",
                           "23066503"
                       ]
                   },
                   "type": "provider_data_dump",
                   "min_event_date": "2013-04-01T00:00:00",
                   "created": "2013-05-16T07:38:06.831119"
                }        

    def tearDown(self):
        teardown_postgres_for_unittests(self.db)


    def test_make_provider_batch_data(self):
        #make sure nothing there beforehand
        matching = ProviderBatchData.query.filter_by(provider="pmc").first()
        assert_equals(matching, None)

        new_batch_data = ProviderBatchData(**self.test_data)
        print new_batch_data

        # still not there
        matching = ProviderBatchData.query.filter_by(provider="pmc").first()
        assert_equals(matching, None)

        self.db.session.add(new_batch_data)
        self.db.session.commit()

        # and now poof there it is
        matching = ProviderBatchData.query.filter_by(provider="pmc").first()
        assert_equals(matching.provider, "pmc")

        assert_equals(matching.aliases, self.test_data["aliases"])

    def test_create_object_from_doc(self):
        new_object = provider_batch_data.create_objects_from_doc(self.old_doc)

        matching = ProviderBatchData.query.filter_by(provider="pmc").first()
        assert_equals(matching.provider, "pmc")

        assert_equals(matching.aliases, self.old_doc["aliases"])

